<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->


<!-- Mirrored from marketifythemes.net/html/STEFAN MARTIC/index-dark.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 03 Dec 2021 15:34:17 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="description" content="Name of your web site">
<meta name="author" content="marketify">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<title>STEFAN MARTIC | Home</title>

<!-- STYLES -->
<link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;family=Poppins:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap" rel="stylesheet">

<link rel="stylesheet" type="text/css" href="css/plugins.css" />
<link rel="stylesheet" type="text/css" href="css/dark.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<!--[if lt IE 9]> <script type="text/javascript" src="js/modernizr.custom.js"></script> <![endif]-->
<style>
	code{
		color: white !important;
	}
	*
	{
		color: aliceblue !important;
	}
	pre
	{
		color: aliceblue !important;
	}
</style>
<!-- /STYLES -->

</head>

<body class="dark"> 
	
	<!-- PRELOADER -->
	<div id="preloader">
		<div class="loader_line"></div>
	</div>
	<!-- /PRELOADER -->
	
<!-- WRAPPER ALL -->
<div class="edina_tm_all_wrap" data-magic-cursor=""> <!-- If you want disable magic cursor add value "hide" -->	
	
	<!-- MODALBOX -->
	<div class="edina_tm_modalbox">
		<div class="box_inner">
			<div class="close">
				<a href="#"><img class="svg" src="img/svg/cancel.svg" alt="" /></a>
			</div>
			<div class="description_wrap"></div>
		</div>
	</div>
	<!-- /MODALBOX -->

	<!-- MOBILE MENU -->
	<div class="edina_tm_mobile_menu">
		<div class="mobile_menu_inner">
			<div class="container">
				<div class="mobile_in">
					
						<a href="#">STEFAN MARTIC<a>
					
					<div class="my_trigger">
						<div class="hamburger hamburger--collapse-r">
							<div class="hamburger-box">
								<div class="hamburger-inner"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="dropdown">
			<div class="container">
				<div class="dropdown_inner">
					<ul class="anchor_nav">
						<li><a href="#home">Home</a></li>
						<li><a href="#about">About</a></li>
						<li><a href="#service">Service</a></li>
						<li><a href="#portfolio">Portfolio</a></li>
						<li><a href="#blog">Blog</a></li>
						<li><a href="#contact">Contact</a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<!-- /MOBILE MENU -->
	
	<!-- SIDEBAR -->
	<div class="edina_tm_sidebar">
		<div class="sidebar_inner">
			<div class="logo">
				<a href="#" style="text-decoration: none;">STEFAN MARTIC</a>
			</div>
			<div class="menu">
				<ul class="anchor_nav">
					<li>
						<div class="list_inner current">
							<a href="#home"><img class="svg custom" src="img/svg/home.svg" alt="" />Home</a>
						</div>
					</li>
					<li>
						<div class="list_inner">
							<a href="#about"><img class="svg custom" src="img/svg/human.svg" alt="" />About</a>
						</div>
					</li>
					<li>
						<div class="list_inner">
							<a href="#service"><img class="svg custom" src="img/svg/service.svg" alt="" />Service</a>
						</div>
					</li>
					<li>
						<div class="list_inner">
							<a href="#portfolio"><img class="svg custom" src="img/svg/portfolio.svg" alt="" />Portfolio</a>
						</div>
					</li>
					<li>
						<div class="list_inner">
							<a href="#blog"><img class="svg custom" src="img/svg/blog.svg" alt="" />Blog</a>
						</div>
					</li>
					<li>
						<div class="list_inner">
							<a href="#contact"><img class="svg custom" src="img/svg/contact.svg" alt="" />Contact</a>
						</div>
					</li>
				</ul>
			</div>
			<div class="author">
				<div class="inner">
					<div class="image">
						<div class="main" data-img-url="img/about/avatar.jpg"></div>
					</div>
					<div class="short">
						<h3>STEFAN MARTIC</h3>
						<a href="mailto://stefan.martic.sm@gmail.com"><span>stefan.martic.sm@gmail.com<span></a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- /SIDEBAR -->
	
	<!-- MAINPART -->
	<div class="edina_tm_mainpart">
		<!-- HERO -->
		<div class="edina_tm_hero" id="home">
			<div class="content">
				<div class="image">
					<div class="main" data-img-url="img/hero/1.jpg"></div>
				</div>
				<div class="extra">
					<h3 class="name">STEFAN MARTIC</h3>
					<p class="text" style="text-align: left;">Accomplished full stack developer with strong experience in the development of web applications like SaaS, CRM, eCommerce, marketplaces, FinTech platforms, etc based on JavaScript and PHP.
						Have solid idea & knowledge of software development methodologies while being a proficient DevOps engineer who is familiar with theimplementation of CI/CD based on Github/BB pipelines, Jenkins,Docker, etc.</p>
					<div class="social">
						<ul>
							<li><a href="#"><img class="svg custom" src="img/svg/social/fb.svg" alt="" /></a></li>
							<li><a href="#"><img class="svg custom" src="img/svg/social/tw.svg" alt="" /></a></li>
							<li><a href="#"><img class="svg custom" src="img/svg/social/in.svg" alt="" /></a></li>
							<li><a href="#"><img class="svg custom" src="img/svg/social/db.svg" alt="" /></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<!-- /HERO -->
		<!-- ABOUT -->
		<div class="edina_tm_about" id="resume">
			<div class="container">
				<div class="mainpart">
				  <div class="col-md-12 mb-5">
					<div class="section-heading text-center">
					  <h3>My <strong>Resume</strong>
					  </h3>
					</div>
				  </div>
				  <br><br>
				  <div class="left" style="float: left; width:50% !important">
					<h4 class="mb-5">Experience</h4>
					<br>
					<div class="resume-item mb-4">
					  <span class="date">
						<span class="icon-calendar"></span>Jan 2018 - present </span>
					  <h5>FULL STACK DEVELOPER</h5>
					  <span class="school">Self-Employed - Full-Time</span>
					</div><br>
					<div class="resume-item mb-4">
					  <span class="date">
						<span class="icon-calendar"></span> Aug 2016 - Dec 2017 </span>
					  <h5>SENIOR FULL STACK DEVELOPER</h5>
					  <!-- <p><li>Developed front-end part of a case managementplatform using Vue and Laravel</li>
						<li> Implemented a large front-end SaaS applicationusing Angular according to wireframes as well as aback-end in Nest.js/Node.js</li>
						<li> Set up the AWS environment (AWS S3, AWSCloudFront, and AWS EC2)</li></p> -->
					  <span class="school">Codeus</span>
					</div>
					<br>
					<div class="resume-item mb-4">
					  <span class="date">
						<span class="icon-calendar"></span> Jan 2013 - Apr 2016 </span>
					  <h5>SENIOR WEB DEVELOPER</h5>
					  <span class="school">ServalIT</span>
					</div>


				  </div>
				  <div class="right">
					<h3 class="mb-5">Education</h3>
					<div class="resume-item mb-4">
					  <span class="date">
						<span class="icon-calendar"></span> 2008 - 2012 </span>
					  <p>Bachelor's Degree, Computer Science</p>
					  <span class="school">UNIVERSITY OF BELGRADE</span>
					</div>
					
				  </div>
				  
				</div>
			  </div>
		</div>
		<!-- /ABOUT -->
		<!-- Resume -->
		<div class="edina_tm_news" id="blog">
			<div class="container">
				<div class="edina_tm_title">
					<h3>News</h3>
					<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris ipsum sit nibh amet egestas tellus.</p>
				</div>
				<div class="news_inner wow fadeInLeft" data-wow-duration="1s">
					<div class="my_carousel">
						<ul class="owl-carousel">
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/news/1.jpg"></div>
										<a class="edina_tm_full_link" href="#"></a>
									</div>
									<div class="news_details">
										<span>July 07,2021 <a href="#">Travel</a></span>
										<h3 class="title"><a href="#">Dostie Memorie</a></h3>
									</div>
									<div class="main_content">
										<div class="descriptions">
											<p class="bigger">Just because we can't get out and about like we normally would, doesn’t mean we have to stop taking pictures. There’s still plenty you can do, provided you're prepared to use some imagination. Here are a few ideas to keep you shooting until normal life resumes.</p>
											<p>Most photographers love to shoot the unusual, and you don’t get much more unusual than These Unprecedented Times. Right now everything counts as out of the ordinary. There are a number of remarkable things about these lockdown days that are worth photographing now so we can remember them when it is all over.</p>
											<p>Streets empty that are usually busy are remarkable and can evoke the sense of historical pictures from before the invention of the motorcar. Other things that are different at the moment will be queues to get into stores and the lines marked out on the floor to show how far apart we should be.</p>
											<div class="quotebox">
												<p>Most photographers find it hard to see interesting pictures in places in which they are most familiar. A trip somewhere new seems always exactly what our photography needed, as shooting away from home consistently inspires us to new artistic heights.</p>
											</div>
											<p>Pretend everything is new and that you haven’t seen it before, and then you will be free to notice the leading lines, the places where one edge meets another in delightful geometric harmony, and how the ordinary things in the kitchen are transformed when the light is on or off.</p>
											<p>The trick here is to look slowly, and then look again. Take the time to look in detail and to look at the same thing from different angles, with different light, long lenses and wide lenses. Then move to the left a bit. You may never feel the need to leave the house again.</p>
										</div>
									</div>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/news/2.jpg"></div>
										<a class="edina_tm_full_link" href="#"></a>
									</div>
									<div class="news_details">
										<span>June 25,2021 <a href="#">Branding</a></span>
										<h3 class="title"><a href="#">Mario Pocopoc</a></h3>
									</div>
									<div class="main_content">
										<div class="descriptions">
											<p class="bigger">Just because we can't get out and about like we normally would, doesn’t mean we have to stop taking pictures. There’s still plenty you can do, provided you're prepared to use some imagination. Here are a few ideas to keep you shooting until normal life resumes.</p>
											<p>Most photographers love to shoot the unusual, and you don’t get much more unusual than These Unprecedented Times. Right now everything counts as out of the ordinary. There are a number of remarkable things about these lockdown days that are worth photographing now so we can remember them when it is all over.</p>
											<p>Streets empty that are usually busy are remarkable and can evoke the sense of historical pictures from before the invention of the motorcar. Other things that are different at the moment will be queues to get into stores and the lines marked out on the floor to show how far apart we should be.</p>
											<div class="quotebox">
												<p>Most photographers find it hard to see interesting pictures in places in which they are most familiar. A trip somewhere new seems always exactly what our photography needed, as shooting away from home consistently inspires us to new artistic heights.</p>
											</div>
											<p>Pretend everything is new and that you haven’t seen it before, and then you will be free to notice the leading lines, the places where one edge meets another in delightful geometric harmony, and how the ordinary things in the kitchen are transformed when the light is on or off.</p>
											<p>The trick here is to look slowly, and then look again. Take the time to look in detail and to look at the same thing from different angles, with different light, long lenses and wide lenses. Then move to the left a bit. You may never feel the need to leave the house again.</p>
										</div>
									</div>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/news/3.jpg"></div>
										<a class="edina_tm_full_link" href="#"></a>
									</div>
									<div class="news_details">
										<span>May 01,2021 <a href="#">Lifestyle</a></span>
										<h3 class="title"><a href="#">Jacuba Bamba</a></h3>
									</div>
									<div class="main_content">
										<div class="descriptions">
											<p class="bigger">Just because we can't get out and about like we normally would, doesn’t mean we have to stop taking pictures. There’s still plenty you can do, provided you're prepared to use some imagination. Here are a few ideas to keep you shooting until normal life resumes.</p>
											<p>Most photographers love to shoot the unusual, and you don’t get much more unusual than These Unprecedented Times. Right now everything counts as out of the ordinary. There are a number of remarkable things about these lockdown days that are worth photographing now so we can remember them when it is all over.</p>
											<p>Streets empty that are usually busy are remarkable and can evoke the sense of historical pictures from before the invention of the motorcar. Other things that are different at the moment will be queues to get into stores and the lines marked out on the floor to show how far apart we should be.</p>
											<div class="quotebox">
												<p>Most photographers find it hard to see interesting pictures in places in which they are most familiar. A trip somewhere new seems always exactly what our photography needed, as shooting away from home consistently inspires us to new artistic heights.</p>
											</div>
											<p>Pretend everything is new and that you haven’t seen it before, and then you will be free to notice the leading lines, the places where one edge meets another in delightful geometric harmony, and how the ordinary things in the kitchen are transformed when the light is on or off.</p>
											<p>The trick here is to look slowly, and then look again. Take the time to look in detail and to look at the same thing from different angles, with different light, long lenses and wide lenses. Then move to the left a bit. You may never feel the need to leave the house again.</p>
										</div>
									</div>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/news/4.jpg"></div>
										<a class="edina_tm_full_link" href="#"></a>
									</div>
									<div class="news_details">
										<span>April 07,2021 <a href="#">Design</a></span>
										<h3 class="title"><a href="#">Forzo Immobile</a></h3>
									</div>
									<div class="main_content">
										<div class="descriptions">
											<p class="bigger">Just because we can't get out and about like we normally would, doesn’t mean we have to stop taking pictures. There’s still plenty you can do, provided you're prepared to use some imagination. Here are a few ideas to keep you shooting until normal life resumes.</p>
											<p>Most photographers love to shoot the unusual, and you don’t get much more unusual than These Unprecedented Times. Right now everything counts as out of the ordinary. There are a number of remarkable things about these lockdown days that are worth photographing now so we can remember them when it is all over.</p>
											<p>Streets empty that are usually busy are remarkable and can evoke the sense of historical pictures from before the invention of the motorcar. Other things that are different at the moment will be queues to get into stores and the lines marked out on the floor to show how far apart we should be.</p>
											<div class="quotebox">
												<p>Most photographers find it hard to see interesting pictures in places in which they are most familiar. A trip somewhere new seems always exactly what our photography needed, as shooting away from home consistently inspires us to new artistic heights.</p>
											</div>
											<p>Pretend everything is new and that you haven’t seen it before, and then you will be free to notice the leading lines, the places where one edge meets another in delightful geometric harmony, and how the ordinary things in the kitchen are transformed when the light is on or off.</p>
											<p>The trick here is to look slowly, and then look again. Take the time to look in detail and to look at the same thing from different angles, with different light, long lenses and wide lenses. Then move to the left a bit. You may never feel the need to leave the house again.</p>
										</div>
									</div>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/news/2.jpg"></div>
										<a class="edina_tm_full_link" href="#"></a>
									</div>
									<div class="news_details">
										<span>March 25,2021 <a href="#">Branding</a></span>
										<h3 class="title"><a href="#">Mosby Lavette</a></h3>
									</div>
									<div class="main_content">
										<div class="descriptions">
											<p class="bigger">Just because we can't get out and about like we normally would, doesn’t mean we have to stop taking pictures. There’s still plenty you can do, provided you're prepared to use some imagination. Here are a few ideas to keep you shooting until normal life resumes.</p>
											<p>Most photographers love to shoot the unusual, and you don’t get much more unusual than These Unprecedented Times. Right now everything counts as out of the ordinary. There are a number of remarkable things about these lockdown days that are worth photographing now so we can remember them when it is all over.</p>
											<p>Streets empty that are usually busy are remarkable and can evoke the sense of historical pictures from before the invention of the motorcar. Other things that are different at the moment will be queues to get into stores and the lines marked out on the floor to show how far apart we should be.</p>
											<div class="quotebox">
												<p>Most photographers find it hard to see interesting pictures in places in which they are most familiar. A trip somewhere new seems always exactly what our photography needed, as shooting away from home consistently inspires us to new artistic heights.</p>
											</div>
											<p>Pretend everything is new and that you haven’t seen it before, and then you will be free to notice the leading lines, the places where one edge meets another in delightful geometric harmony, and how the ordinary things in the kitchen are transformed when the light is on or off.</p>
											<p>The trick here is to look slowly, and then look again. Take the time to look in detail and to look at the same thing from different angles, with different light, long lenses and wide lenses. Then move to the left a bit. You may never feel the need to leave the house again.</p>
										</div>
									</div>
								</div>
							</li>
						</ul>
						<a class="prev_button" href="#"><span></span></a>
						<a class="next_button" href="#"><span></span></a>
					</div>
				</div>
			</div>
		</div>
		<!-- /Resume -->
		<!-- SERVICES -->
		<div class="edina_tm_services" id="service">
			<div class="container">
				<div class="edina_tm_title">
					<h3>What I Do</h3>

				</div>
				<div class="service_list">
					<ul>
						<li class="wow fadeInLeft" data-wow-duration="1s">
							<div class="list_inner">
								<img class="svg custom" src="img/svg/1.svg" alt="" />
								<div class="service_title"><h3>Frontend Development</h3></div>
							</div> 
						</li>
						<li class="wow fadeInLeft" data-wow-duration="1s" data-wow-delay="0.2s">
							<div class="list_inner">
								<img class="svg custom" src="img/svg/4.svg" alt="" />
								<div class="service_title"><h3>Backend Development</h3></div>
							</div> 
						</li>
						<li class="wow fadeInLeft" data-wow-duration="1s" data-wow-delay="0.4s">
							<div class="list_inner">
								<img class="svg custom" src="img/svg/2.svg" alt="" />
								<div class="service_title"><h3>Full Stack Development</h3></div>
							</div> 
						</li>
						<li class="wow fadeInLeft" data-wow-duration="1s" data-wow-delay="0.4s">
							<div class="list_inner">
								<img class="svg custom" src="img/svg/3.svg" alt="" />
								<div class="service_title"><h3>Mobile App Design</h3></div>
							</div> 
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- /SERVICES -->
		<!-- PORTFOLIO -->
		<div class="edina_tm_portfolio" id="portfolio">
			<div class="container">
				<div class="edina_tm_title">
					<h3>Portfolio</h3>
				</div>
				<div class="portfolio_inner wow fadeInLeft" data-wow-duration="1s">
					<div class="my_carousel gallery_zoom">
						<ul class="owl-carousel">
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/portfolio/1.jpg"></div>
									</div>
									<div class="details">
										<h3><a href="#">ROAST</a></h3>
										<span><a href="#">REACT, NODE, TYPESCRIPT</a></span>
									</div>
									<a class="edina_tm_full_link popup-vimeo" href="https://vimeo.com/312334044"></a>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/portfolio/2.jpg"></div>
									</div>
									<div class="details">
										<h3><a href="#">Allex</a></h3>
										<span><a href="#">Vue, NextJs, Graphql</a></span>
									</div>
									<a class="edina_tm_full_link popup-youtube" href="https://www.youtube.com/watch?v=Amq-qlqbjYA"></a>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/portfolio/3.jpg"></div>
									</div>
									<div class="details">
										<h3><a href="#">Educative</a></h3>
										<span><a href="#">VueJS, Vuetify, Nuxt, Graphql</a></span>
									</div>
									<a class="edina_tm_full_link soundcloude_link mfp-iframe audio" href="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/252739311&amp;color=%23ff5500&amp;auto_play=true&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;show_teaser=true&amp;visual=true"></a>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/portfolio/4.jpg"></div>
									</div>
									<div class="details">
										<h3><a href="#">Nighty Networks</a></h3>
										<span><a href="#">Tailwind Css, Laravel</a></span>
									</div>
									<a class="edina_tm_full_link zoom" href="img/portfolio/4.jpg"></a>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/portfolio/5.jpg"></div>
									</div>
									<div class="details">
										<h3><a href="#">Brocoder</a></h3>
										<span><a href="#">AngularJs, NodeJs, ExpressJs</a></span>
									</div>
									<a class="edina_tm_full_link zoom" href="img/portfolio/5.jpg"></a>
								</div>
							</li>
						</ul>
						<a class="prev_button" href="#"><span></span></a>
						<a class="next_button" href="#"><span></span></a>
					</div>
				</div>
			</div>
		</div>
		<!-- PORTFOLIO -->
		
		<!-- NEWS -->
		<div class="edina_tm_news" id="blog">
			<div class="container">
				<div class="edina_tm_title">
					<h3>News</h3>
				</div>
				<div class="news_inner wow fadeInLeft" data-wow-duration="1s">
					<div class="my_carousel">
						<ul class="owl-carousel">
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/news/1.jpg"></div>
										<a class="edina_tm_full_link" href="#"></a>
									</div>
									<div class="news_details">
										<span>Jul 28 , 2019 <a href="#">FRONTEND</a></span>
										<h3 class="title"><a href="#">What are React Hooks?</a></h3>
									</div>
									<div class="main_content">
										<div class="descriptions">
											<div class="post-full-content">
												<h2>
													<a name="introduction" href="#introduction">
													</a>
													Introduction <a name="1"></a>
												  </h2>
												  
												  <p>React is a free and open-source front-end JavaScript library for UI components, maintained by Facebook and a group of individual developers. However it's used, React is only concerned with state management and rendering that state to the DOM, initially through React state and lifecycle methods.</p>
												  
												  <p>But that all changed when React 16.8 was introduced, its new addition of Hooks allow the use of state and other React features without writing a class. Hooks were developed to solve a bunch of unconnected problems in React. Some of the problems (are not limited too) include:</p>
												  
												  <ol>
												  <li><p><a href="https://reactjs.org/docs/hooks-intro.html#its-hard-to-reuse-stateful-logic-between-components">It’s hard to reuse stateful logic between components</a></p></li>
												  <li><p><a href="https://reactjs.org/docs/hooks-intro.html#complex-components-become-hard-to-understand">Complex components become hard to understand</a></p></li>
												  <li><p><a href="https://reactjs.org/docs/hooks-intro.html#classes-confuse-both-people-and-machines">Classes confuse both people and machines</a></p></li>
												  </ol>
												  
												  <h2>
													<a name="what-are-hooks" href="#what-are-hooks">
													</a>
													What are Hooks? <a name="2"></a>
												  </h2>
												  
												  <p>Hooks are simply just functions that let you “hook into” React state and lifecycle features. Unlike lifecycle methods, Hooks don’t work inside classes. Which can make working with them super flexible, since they let you use lifecycle features in function components. While React provides a few built-in Hooks like useState, you can also create your own Hooks to reuse stateful behavior between components. </p>
												  
												  <h2>
													<a name="usestate" href="#usestate">
													</a>
													useState <a name="3"></a>
												  </h2>
												  
												  <p><em>This example was taken from and can be seen in the <a href="https://reactjs.org/docs">React Documentation</a> for Hooks.</em></p>
												  
												  <p>If you are familiar with React, then you may use to seeing state handled like so:<br>
												  </p>
												  
												  <div class="highlight js-code-highlight">
												  <pre class="highlight javascript"><code><span class="kd">class</span> <span class="nx">Example</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
													<span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
													  <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
													  <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
														<span class="na">count</span><span class="p">:</span> <span class="mi">0</span>
													  <span class="p">};</span>
													<span class="p">}</span>
												  
													<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
													  <span class="k">return</span> <span class="p">(</span>
														<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
														  <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">You</span> <span class="nx">clicked</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span> <span class="nx">times</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
												  </span>        <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">count</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">})}</span><span class="o">&gt;</span>
															<span class="nx">Click</span> <span class="nx">me</span>
														  <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
												  </span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
												  </span>    <span class="p">);</span>
													<span class="p">}</span>
												  <span class="p">}</span>
												  </code></pre>
												  <div class="highlight__panel js-actions-panel">
												  <div class="highlight__panel-action js-fullscreen-code-action">
														
												  
												  </div>
												  </div>
												  </div>
												  
												  
												  
												  <p>But with React Hooks, that turns into this:<br>
												  </p>
												  
												  <div class="highlight js-code-highlight">
												  <pre class="highlight javascript"><code><span class="c1">// This example renders a counter. When you click the button, it increments the value:</span>
												  <span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
												  
												  <span class="kd">function</span> <span class="nx">Example</span><span class="p">()</span> <span class="p">{</span>
													<span class="c1">// Declare a new state variable, which we'll call "count"</span>
													<span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
												  
													<span class="k">return</span> <span class="p">(</span>
													  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
														<span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">You</span> <span class="nx">clicked</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span> <span class="nx">times</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
												  </span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)}</span><span class="o">&gt;</span>
														  <span class="nx">Click</span> <span class="nx">me</span>
														<span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
												  </span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
												  </span>  <span class="p">);</span>
												  <span class="p">}</span>
												  </code></pre>
												  <div class="highlight__panel js-actions-panel">
												  <div class="highlight__panel-action js-fullscreen-code-action">
													   <!-- xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
													  <path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
													  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
													  <path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
												  </svg> -->
												  
												  </div>
												  </div>
												  </div>
												  
												  
												  
												  <p>The first Hook we'll be examining, is the State Hook. <strong>useState</strong> is a Hook called inside a function component to add local state. Once added, React uses the Hook to preserve this state between re-renders by returning two things: the current state value and a function for updating it. This function can be called from anywhere, such as an event handler. If you familiar with React, compare it to this.setState in a class, without merging the old and updated state together.</p>
												  
												  <p>"useState" only takes in one initial argument, which is only used during the first render. In the previous example, this argument is "0" because the counter starts from zero. <em>Keep in mind that unlike this.state, the state here doesn’t have to be an object.</em> </p>
												  
												  <p>You can understand out how to declare multiple variables with the "useState" hook <a href="https://reactjs.org/docs/hooks-overview.html#declaring-multiple-state-variables">here</a>.</p>
												  
												  <h2>
													<a name="useeffect" href="#useeffect">
													</a>
													useEffect <a name="4"></a>
												  </h2>
												  
												  <p>When coding with React, you may perform data fetching, subscriptions, or manually changing the DOM. The React developers like to call these “side effects” since they affect other components, and can’t be done while rendering.</p>
												  
												  <p>The Effect Hook, <strong>useEffect</strong>, adds the ability to effect from, <em>you guessed it</em>, a function component. Similar to componentDidMount, componentDidUpdate, and componentWillUnmount in React classes, "useEffect" is unified into a single API. </p>
												  
												  <p>Going off the example before, after React updates the DOM, the component sets the document title:<br>
												  </p>
												  
												  <div class="highlight js-code-highlight">
												  <pre class="highlight javascript"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
												  
												  <span class="kd">function</span> <span class="nx">Example</span><span class="p">()</span> <span class="p">{</span>
													<span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
												  
													<span class="c1">// Similar to componentDidMount and componentDidUpdate:</span>
													<span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
													  <span class="c1">// Update the document title using the browser API</span>
													  <span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s2">`You clicked </span><span class="p">${</span><span class="nx">count</span><span class="p">}</span><span class="s2"> times`</span><span class="p">;</span>
													<span class="p">});</span>
												  
													<span class="k">return</span> <span class="p">(</span>
													  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
														<span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">You</span> <span class="nx">clicked</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span> <span class="nx">times</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
												  </span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)}</span><span class="o">&gt;</span>
														  <span class="nx">Click</span> <span class="nx">me</span>
														<span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
												  </span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
												  </span>  <span class="p">);</span>
												  <span class="p">}</span>
												  </code></pre>
												  <div class="highlight__panel js-actions-panel">
												  <div class="highlight__panel-action js-fullscreen-code-action">
														
												  
												  </div>
												  </div>
												  </div>
												  
												  
												  
												  <p>By calling "useEffect", you’re telling React to run the “effect” function you created after pushing changes to the DOM. Effects are declared inside the component, so they have access to props and state. By default, React runs the effects after every render, starting with the first one. Effects can also optionally specify actions to take after by returning a function. Hooks let you organize side effects in a component by what ideas are related, rather than forcing a split based on lifecycle methods.</p>
												  
												  <p>Unlike the lifecycle methods, componentDidMount or componentDidUpdate, effects scheduled with useEffect don’t block the browser from updating the screen. This cut back on processing time, since the majority of effects don’t need to happen synchronously, making your app feel more responsive. In a case where effects do need to occur synchronously(such as measuring the layout), there is a separate useLayoutEffect Hook with an API identical to useEffect. You can learn more about that in the <a href="#7">Additional Hooks and API Reference</a> section.</p>
												  
												  <h2>
													<a name="rules-of-hooks" href="#rules-of-hooks">
													</a>
													Rules of Hooks <a name="5"></a>
												  </h2>
												  
												  <p>Despite Hooks being Javascript functions, there are still several rules they must follow in order to maintain the black magic that gives them lifecycle features. </p>
												  
												  <ol>
												  <li>
												  <p><strong>Only Call Hooks at the Top Level</strong></p>
												  
												  <ul>
												  <li> Always use Hooks at the top level of your React function, before any early returns. This means don’t call Hooks inside loops, conditions, or nested functions. This ensures that Hooks are called in the same order each time a component renders, which allows React to correctly preserve the state of Hooks between varying useState and useEffect calls.</li>
												  </ul>
												  </li>
												  <li>
												  <p><strong>Only Call Hooks from React Functions</strong></p>
												  
												  <ul>
												  <li>Don’t call Hooks from regular JavaScript functions. 
												  Try the following instead:
												  
												  <ul>
												  <li>Call Hooks from custom Hooks </li>
												  <li>Call Hooks from React function components.</li>
												  </ul>
												  </li>
												  </ul>
												  </li>
												  </ol>
												  
												  <p><em>To make things easy, the React developers made this <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks">plugin</a> that automatically enforces these rules. But, that doesn't mean you should skip over knowing proper Hook etiquette.</em></p>
												  
												  <h2>
													<a name="building-your-own-hooks" href="#building-your-own-hooks">
													</a>
													Building your own Hooks <a name="6"></a>
												  </h2>
												  
												  <p>What if you want to go beyond just the Effect Hook? Well, there's an answer for that, build your own! By building your own Hooks, you can extract component logic into reusable functions. You may be use to doing this in React through: render props and higher-order components. But with the addition of Hooks, you can solve many of the same problems without adding more components to the tree. <em>No one likes cluttered code!</em></p>
												  
												  <p><em>Think about how share logic between two JavaScript functions, you extract it into yet another function. And since components and Hooks are functions, this works for them too!</em></p>
												  
												  <p><strong>A custom Hook is a JavaScript function whose name starts with ”use” and has the ability to call other Hooks.</strong> </p>
												  
												  <p>You can write custom Hooks that cover a variety of cases such as form handling, animation, timers, and much more. Don't be afraid to experiment with creating your own Hooks, because you might find yourself making a meaningful contribution to others down the line. <em>React even provides <a href="https://reactjs.org/docs/how-to-contribute.html">documentation</a> on how to contribute to the open source project.</em></p>
												  
												  <p>For more information about building your own custom Hooks and some examples, see the <a href="https://reactjs.org/docs/hooks-custom.html">React Documentation</a> for creating custom Hooks. </p>
												  
												  <p>As an additional resource, here is another recent blog post that further explains how to build your own Hooks, and supplies you with some great examples such as a "useFetch" custom hook. Check it out <a href="https://alterclass.io/blog/5-react-custom-hooks-you-should-start-using-explained">here</a>!</p>
												  
												  <h2>
													<a name="additional-hooks-and-api-reference" href="#additional-hooks-and-api-reference">
													</a>
													Additional Hooks and API Reference <a name="7"></a>
												  </h2>
												  
												  <p>If you're interested in learning about the Hooks API reference, the React documentation provides a reader friendly explanation for the <a href="https://reactjs.org/docs/hooks-reference.html#basic-hooks">basic hooks</a>:</p>
												  
												  <ul>
												  <li><a href="https://reactjs.org/docs/hooks-reference.html#usestate">useState</a></li>
												  <li><a href="https://reactjs.org/docs/hooks-reference.html#useeffect">useEffect</a></li>
												  <li><a href="https://reactjs.org/docs/hooks-reference.html#usecontext">useContext</a></li>
												  </ul>
												  
												  <p>You can also use <a href="https://reactjs.org/docs/hooks-reference.html#additional-hooks">additional Hooks</a> which are either variants of the basic ones, or only needed for specific edge cases. While helpful, they are just additions, so don't worry about learning them right away. These Hooks include:</p>
												  
												  <ul>
												  <li><a href="https://reactjs.org/docs/hooks-reference.html#usereducer">useReducer</a></li>
												  <li><a href="https://reactjs.org/docs/hooks-reference.html#usecallback">useCallback</a></li>
												  <li><a href="https://reactjs.org/docs/hooks-reference.html#usememo">useMemo</a></li>
												  <li><a href="https://reactjs.org/docs/hooks-reference.html#useref">useRef</a></li>
												  <li><a href="https://reactjs.org/docs/hooks-reference.html#useimperativehandle">useImperativeHandle</a></li>
												  <li><a href="https://reactjs.org/docs/hooks-reference.html#uselayouteffect">useLayoutEffect</a></li>
												  <li><a href="https://reactjs.org/docs/hooks-reference.html#usedebugvalue">useDebugValue</a></li>
												  </ul>
												  
												  <h2>
													<a name="conclusion" href="#conclusion">
													</a>
													Conclusion <a name="8"></a>
												  </h2>
												  
												  <p>React is constantly changing, and programmers who are focused on developing products may not have the time to learn and use every new API released. Hooks are still fairly new, so while they may come in handy, there's no rush to adopt them into your every day practices, <em>unless that's what your heart desires</em>. </p>
												  
												  <p>Hooks were made to work side-by-side with existing code, which allows you to adopt them gradually, <em>meaning there is no rush to migrate to Hooks.</em> Do not feel the need to do some “big rewrite”, especially for existing, complex class components. It's a bit of a learning curve to start “thinking in Hooks”. So practice using Hooks in your <em>unimportant</em> work first, and once you, <em>and anyone you're working with</em>, feel comfortable with them, give them a go! </p>
												  
												  <p>Hooks were made in hopes to one day cover all existing use cases for classes, but don't worry because class components aren't going anywhere soon. If you don't believe me, I'll quote the React developers themselves, </p>
												  
												  <blockquote>
												  <p>"At Facebook, we have tens of thousands of components written as classes, and we have absolutely no plans to rewrite them. Instead, we are starting to use Hooks in the new code side by side with classes."</p>
												  </blockquote>
												  
												  <p>Hopefully this article has inspired you to hook into your full React potential, or maybe you decided to not bother learning and using <em>yet another</em> API. Either way, let me know your opinion about Hooks, and where you see them going in the future. ✨ Happy Hooking! ✨</p>
													  
													<hr>
													
													<h2>
													  <a name="plug-logrocket-a-dvr-for-web-apps" href="#plug-logrocket-a-dvr-for-web-apps" class="anchor">
													  </a>
													  Plug: <a href="https://logrocket.com/signup/">LogRocket</a>, a DVR for web apps
													</h2>
													
													<p> <br>
													<a href="https://res.cloudinary.com/practicaldev/image/fetch/s--6FG5kvEL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png%3Fresize%3D1200%252C677%26ssl%3D1" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--6FG5kvEL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png%3Fresize%3D1200%252C677%26ssl%3D1" alt="LogRocket Dashboard Free Trial Banner" loading="lazy"></a><br>
													 <br>
													<a href="https://logrocket.com/signup/">LogRocket</a> is a frontend logging tool that lets you replay problems as if they happened in your own browser. Instead of guessing why errors happen, or asking users for screenshots and log dumps, LogRocket lets you replay the session to quickly understand what went wrong. It works perfectly with any app, regardless of framework, and has plugins to log additional context from Redux, Vuex, and @ngrx/store.<br>
													 <br>
													In addition to logging Redux actions and state, LogRocket records console logs, JavaScript errors, stacktraces, network requests/responses with headers + bodies, browser metadata, and custom logs. It also instruments the DOM to record the HTML and CSS on the page, recreating pixel-perfect videos of even the most complex single-page apps.<br>
													 <br>
													 </p>	  
											
										  </div>
										</div>
									</div>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/news/2.jpg"></div>
										<a class="edina_tm_full_link" href="#"></a>
									</div>
									<div class="news_details">
										<span>Sep 08, 2022 <a href="#">FULLSTACK</a></span>
										<h3 class="title"><a href="#">Using Next.js with Fauna and GraphQL</a></h3>
									</div>
									<div class="main_content">
										<div class="descriptions">
											<div class="row">
												<div class="post-heading col-md-8 offset-md-2">
												  <!-- <div class="categories">
													<a class="category-name" href="../category/personal/index.html">Frontend</a>
												  </div> -->
												  <h1 class="post-title">Using Next.js with Fauna and GraphQL</h1>
												  <span class="post-date">Sep 08, 2022</span>
												</div>
												<div class="post-content col-md-10 offset-md-1">
													<p><a href="http://nextjs.org/">Next.js</a> is a frontend framework, powered by React, which provides optimizations and tools to create fast websites. It supports both hybrid static pages, as well as dynamic, real-time content. With built-in integrations like <a href="https://nextjs.org/docs/basic-features/typescript">TypeScript</a> and <a href="https://nextjs.org/docs/basic-features/eslint">ESLint</a>, Next.js simplifies the Developer Experience (DX) and optimizes for serverless and <a href="https://nextjs.org/docs/deployment">edge deployments</a>.</p>
									
													<p>Next.js is not opinionated about where you store your data. It provides APIs for the developer to hook into their content, commerce, or database of choice. Since Next.js is optimized for serverless, it makes sense to pair it with a serverless database. </p>
													
													<h2>
													  <a name="why-fauna-with-nextjs" href="#why-fauna-with-nextjs">
													  </a>
													  Why Fauna with Next.js?
													</h2>
													
													<p>Fauna is a serverless, transactional database. It's flexible like NoSQL databases, with support for relational data and transactions. Plus, it has an <a href="https://fauna.com/pricing">excellent free tier</a> and is a managed service. No servers to maintain or hidden fees!</p>
													
													<p>Since it's serverless-first, you can consider Fauna "connectionless". Instead of battling connection limits, Fauna provides a database as an API, allowing developers to not worry about connection limits in serverless environments. Further, it provides a <a href="https://docs.fauna.com/fauna/current/api/graphql/">GraphQL API</a>, which simplifies creating, querying, and updating your data.</p>
													
													<h2>
													  <a name="why-vercel-with-nextjs" href="#why-vercel-with-nextjs">
													  </a>
													  Why Vercel with Next.js?
													</h2>
													
													<p><a href="http://vercel.com/">Vercel</a> is a serverless platform for static applications and frontend frameworks, providing a frictionless Developer Experience to take care of the hard things: deploy instantly, scale automatically, and serve personalized content around the globe.</p>
													
													<p>Vercel makes it easy for frontend teams to develop, preview, and ship delightful user experiences, where performance is the default. Fauna.com is built with Next.js and Vercel!</p>
													
													<p>Let's explore deploying a Next.js app using Fauna to Vercel.</p>
													
													<h2>
													  <a name="deploying-nextjs-and-fauna-to-vercel" href="#deploying-nextjs-and-fauna-to-vercel">
													  </a>
													  Deploying Next.js and Fauna to Vercel
													</h2>
													
													<p>Getting started with Fauna and Next.js only takes a few minutes, thanks to the official Next.js template and the <a href="https://vercel.com/integrations/fauna">Vercel Integration</a>. The integration will allow you to create or connect to your Fauna database, create a new key, and then add it as an <a href="https://vercel.com/docs/environment-variables">Environment Variable</a> to your Vercel project. The value will be saved as <code>FAUNA_ADMIN_KEY</code>.</p>
													
													<h3>
													  <a name="manual-installation" href="#manual-installation">
													  </a>
													  Manual Installation
													</h3>
													
													<p>Alternatively, you can start from the command line locally and clone the template using <a href="https://nextjs.org/docs/api-reference/create-next-app">create-next-app</a>.<br>
													</p>
													
													<div class="highlight js-code-highlight">
													<pre class="highlight plaintext"><code>npx create-next-app --example with-fauna with-fauna-app
													</code></pre>
													<div class="highlight__panel js-actions-panel">
													<div class="highlight__panel-action js-fullscreen-code-action">
														<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
														<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
													</svg>
													
														<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
														<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
													</svg> -->
													
													</div>
													</div>
													</div>
													
													
													
													<p>Next, <a href="https://dashboard.fauna.com/">create a database</a> and generate an admin token by going to the <strong>Security</strong> tab on the left and then click <strong>New Key</strong>. Give the new key a name and select the <strong>Admin</strong> Role. Save the token.</p>
													
													<h3>
													  <a name="setting-up-your-schema" href="#setting-up-your-schema">
													  </a>
													  Setting Up Your Schema
													</h3>
													
													<p>The Next.js and Fauna example includes a setup script (<code>npm run setup</code>). After providing your admin token, the script will:</p>
													
													<ul>
													<li>
													<strong>Import your GraphQL schema:</strong> Fauna automatically sets up collections and indexes to support your queries. You can view these in your <a href="https://dashboard.fauna.com/">project dashboard</a> under <strong>GraphQL</strong>.</li>
													<li>
													<strong>Create an index and function:</strong> The script will create a GraphQL resolver that uses <a href="https://docs.fauna.com/fauna/current/api/graphql/functions?lang=javascript">User-defined functions</a> based on a sorting index.</li>
													<li>
													<strong>Create a scoped token:</strong> This token is for use on the client side. The admin key can be used on the server side.</li>
													</ul>
													
													<p>After the script completes, a <code>.env.local</code> <a href="https://nextjs.org/docs/basic-features/environment-variables">file</a> will be created for you with the newly generated client token assigned to an Environment Variable.</p>
													
													<h2>
													  <a name="connecting-to-fauna-in-your-nextjs-application" href="#connecting-to-fauna-in-your-nextjs-application">
													  </a>
													  Connecting to Fauna in your Next.js Application
													</h2>
													
													<p>To connect to your Fauna database with GraphQL, you can use the <a href="https://github.com/prisma-labs/graphql-request">graphql-request</a> library to securely fetch or mutate data inside <code>lib/fauna.js</code>.<br>
													</p>
													
													<div class="highlight js-code-highlight">
													<pre class="highlight jsx"><code><span class="c1">// lib/fauna.js</span>
													
													<span class="k">import</span> <span class="p">{</span> <span class="nx">GraphQLClient</span><span class="p">,</span> <span class="nx">gql</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">graphql-request</span><span class="dl">'</span>
													
													<span class="kd">const</span> <span class="nx">graphQLClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GraphQLClient</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://graphql.fauna.com/graphql</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
													  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
														<span class="na">authorization</span><span class="p">:</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">FAUNA_ADMIN_KEY</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
													  <span class="p">},</span>
													<span class="p">})</span>
													</code></pre>
													<div class="highlight__panel js-actions-panel">
													<div class="highlight__panel-action js-fullscreen-code-action">
														<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
														<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
													</svg>
													
														<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
														<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
													</svg>
													 -->
													</div>
													</div>
													</div>
													
													
													
													<p>Alternatively, you can use the <a href="https://docs.fauna.com/fauna/current/drivers/javascript">Fauna JavaScript driver</a> to execute FQL queries in Node.js.</p>
													
													<h2>
													  <a name="querying-fauna-with-graphql" href="#querying-fauna-with-graphql">
													  </a>
													  Querying Fauna with GraphQL
													</h2>
													
													<p>Now that your GraphQL client has been created, you can query or mutate data using your secure connection.<br>
													</p>
													
													<div class="highlight js-code-highlight">
													<pre class="highlight jsx"><code><span class="c1">// lib/fauna.js</span>
													
													<span class="k">export</span> <span class="kd">const</span> <span class="nx">listGuestbookEntries</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
													  <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">gql</span><span class="s2">`
														query Entries($size: Int) {
														  entries(_size: $size) {
															data {
															  _id
															  _ts
															  name
															  message
															  createdAt
															}
														  }
														}
													  `</span>
													
													  <span class="k">return</span> <span class="nx">graphQLClient</span>
														<span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="p">{</span> <span class="na">size</span><span class="p">:</span> <span class="mi">999</span> <span class="p">})</span>
														<span class="p">.</span><span class="nx">then</span><span class="p">(({</span> <span class="na">entries</span><span class="p">:</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">data</span><span class="p">)</span>
													<span class="p">}</span>
													</code></pre>
													<div class="highlight__panel js-actions-panel">
													<div class="highlight__panel-action js-fullscreen-code-action">
														<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
														<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
													</svg>
													
														<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
														<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
													</svg>
													 -->
													</div>
													</div>
													</div>
													
													
													
													<h2>
													  <a name="displaying-your-fauna-data-inside-nextjs" href="#displaying-your-fauna-data-inside-nextjs">
													  </a>
													  Displaying your Fauna Data inside Next.js
													</h2>
													
													<p>Since Next.js can handle multiple rendering strategies, including static-site generation, server-side rendering, and client-side rendering, we can display our data from Fauna in many ways.</p>
													
													<h3>
													  <a name="static-site-generation" href="#static-site-generation">
													  </a>
													  Static Site Generation
													</h3>
													
													<p>Using <a href="https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation">getStaticProps</a> and <a href="https://nextjs.org/docs/basic-features/data-fetching#getstaticpaths-static-generation">getStaticPaths</a>, we can statically generate all of the content from our Fauna database.<br>
													</p>
													
													<div class="highlight js-code-highlight">
													<pre class="highlight jsx"><code><span class="c1">// pages/entries/[id].js</span>
													
													<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Entry</span><span class="p">({</span> <span class="nx">entry</span> <span class="p">})</span> <span class="p">{</span>
													  <span class="c1">// Render entry...</span>
													<span class="p">}</span>
													
													<span class="c1">// This function gets called at build time</span>
													<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">getStaticPaths</span><span class="p">()</span> <span class="p">{</span>
													  <span class="c1">// Query all entries from Fauna</span>
													  <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">listGuestbookEntries</span><span class="p">()</span>
													  <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">()</span>
													
													  <span class="c1">// Get the paths we want to pre-render based on entries</span>
													  <span class="kd">const</span> <span class="nx">paths</span> <span class="o">=</span> <span class="nx">entries</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">entry</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
														<span class="na">params</span><span class="p">:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">entry</span><span class="p">[</span><span class="dl">'</span><span class="s1">_id</span><span class="dl">'</span><span class="p">]</span> <span class="p">}</span>
													  <span class="p">}))</span>
													
													  <span class="c1">// We'll pre-render only these paths at build time.</span>
													  <span class="c1">// { fallback: false } means other routes should 404.</span>
													  <span class="k">return</span> <span class="p">{</span> <span class="nx">paths</span><span class="p">,</span> <span class="na">fallback</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}</span>
													<span class="p">}</span>
													
													<span class="c1">// This also gets called at build time</span>
													<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">getStaticProps</span><span class="p">({</span> <span class="nx">params</span> <span class="p">})</span> <span class="p">{</span>
													  <span class="c1">// params contains the key `id`.</span>
													  <span class="c1">// If the route is like /entries/1, then params.id is 1</span>
													  <span class="c1">// We could create getGuestbookEntry similar to listGuestbookEntries</span>
													  <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getGuestbookEntry</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
													  <span class="kd">const</span> <span class="nx">entry</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">()</span>
													
													  <span class="c1">// Pass entry data to the page via props</span>
													  <span class="k">return</span> <span class="p">{</span> <span class="na">props</span><span class="p">:</span> <span class="p">{</span> <span class="nx">entry</span> <span class="p">}</span> <span class="p">}</span>
													<span class="p">}</span>
													</code></pre>
													<div class="highlight__panel js-actions-panel">
													<div class="highlight__panel-action js-fullscreen-code-action">
														<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
														<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
													</svg>
													
														<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
														<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
													</svg> -->
													
													</div>
													</div>
													</div>
													
													
													
													<h3>
													  <a name="serverside-rendering" href="#serverside-rendering">
													  </a>
													  Server-Side Rendering
													</h3>
													
													<p>If we need to fetch new data from <em>every</em> request, we can use <a href="https://nextjs.org/docs/basic-features/data-fetching#getserversideprops-server-side-rendering">getServerSideProps</a>.<br>
													</p>
													
													<div class="highlight js-code-highlight">
													<pre class="highlight jsx"><code><span class="c1">// pages/index.js</span>
													
													<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Entries</span><span class="p">({</span> <span class="nx">entries</span> <span class="p">})</span> <span class="p">{</span>
													  <span class="c1">// Render entries...</span>
													<span class="p">}</span>
													
													<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">getServerSideProps</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
													  <span class="c1">// Query all entries from Fauna</span>
													  <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">listGuestbookEntries</span><span class="p">()</span>
													  <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">()</span>
													
													  <span class="c1">// Pass entry data to the page via props</span>
													  <span class="k">return</span> <span class="p">{</span>
														<span class="na">props</span><span class="p">:</span> <span class="p">{</span> <span class="nx">entries</span> <span class="p">}</span>
													  <span class="p">}</span>
													<span class="p">}</span>
													</code></pre>
													<div class="highlight__panel js-actions-panel">
													<div class="highlight__panel-action js-fullscreen-code-action">
														<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
														<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
													</svg>
													
														<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
														<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
													</svg> -->
													
													</div>
													</div>
													</div>
													
													
													
													<h3>
													  <a name="clientside-rendering" href="#clientside-rendering">
													  </a>
													  Client-Side Rendering
													</h3>
													
													<p>If we want to fetch data on the client-side, initially showing a loading state, we can use a React hook library like <a href="https://swr.vercel.app/">SWR</a> to simplify data fetching.<br>
													</p>
													
													<div class="highlight js-code-highlight">
													<pre class="highlight jsx"><code><span class="c1">// pages/index.js</span>
													
													<span class="k">import</span> <span class="nx">useSWR</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">swr</span><span class="dl">'</span>
													
													<span class="kd">const</span> <span class="nx">fetcher</span> <span class="o">=</span> <span class="p">(...</span><span class="nx">args</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">fetch</span><span class="p">(...</span><span class="nx">args</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
													
													<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Entries</span><span class="p">()</span> <span class="p">{</span>
													  <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useSWR</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/entries</span><span class="dl">'</span><span class="p">,</span> <span class="nx">fetcher</span><span class="p">)</span>
													
													  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>failed to load<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
													  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>loading...<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
													  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>hello <span class="si">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span>!<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
													<span class="p">}</span>
													</code></pre>
													<div class="highlight__panel js-actions-panel">
													<div class="highlight__panel-action js-fullscreen-code-action">
														<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
														<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
													</svg>
													
														<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
														<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
													</svg>
													 -->
													</div>
													</div>
													</div>
													
													
													
													<p>This example fetches the Fauna data from an <a href="https://nextjs.org/docs/api-routes/introduction">API Route</a>, which allows us to securely connect to Fauna on the server.<br>
													</p>
													
													<div class="highlight js-code-highlight">
													<pre class="highlight jsx"><code><span class="c1">// pages/api/entries.js</span>
													
													<span class="k">import</span> <span class="p">{</span> <span class="nx">listGuestbookEntries</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../lib/fauna</span><span class="dl">'</span>
													
													<span class="k">export</span> <span class="k">default</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">handler</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
													  <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">listGuestbookEntries</span><span class="p">()</span>
													
													  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">entries</span><span class="p">)</span>
													<span class="p">}</span>
													</code></pre>
													<div class="highlight__panel js-actions-panel">
													<div class="highlight__panel-action js-fullscreen-code-action">
														<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
														<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
													</svg>
													
														<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
														<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
													</svg> -->
													
													</div>
													</div>
													</div>
													
													
													
													<h2>
													  <a name="next-steps" href="#next-steps">
													  </a>
													  Next Steps
													</h2>
													
													<p>Try out Fauna and Next.js today and <a href="https://vercel.com/integrations/fauna">deploy to Vercel</a>. Next, you can explore:</p>
													
													<ul>
													<li>Explore Fauna's <a href="https://docs.fauna.com/fauna/current/tutorials/authentication/user.html">built-in identity and authentication</a>, which can be paired with NextAuth and their <a href="https://next-auth.js.org/adapters/fauna">built-in adapter for Fauna</a>.</li>
													<li>Learn more about <a href="https://fauna.com/blog/evolving-the-structure-of-your-fauna-database">migrating your Fauna schema</a>.</li>
													<li>Explore <a href="https://the-guild.dev/blog/graphql-codegen-plugin-typescript-swr">GraphQL code generation</a> to auto-generate <a href="https://swr.vercel.app/">SWR hooks</a>.</li>
													</ul>
												</div>
				  
											</div>
										</div>
									</div>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/news/3.jpg"></div>
										<a class="edina_tm_full_link" href="#"></a>
									</div>
									<div class="news_details">
										<span>Sep 19, 2020 <a href="#">BACKEND</a></span>
										<h3 class="title"><a href="#">Step by step guide to Laravel package</a></h3>
									</div>
									<div class="main_content">
										<div class="row">
											<div class="post-heading col-md-8 offset-md-2">
											  <!-- <div class="categories">
												<a class="category-name" href="../category/design/index.html">Backend</a>
											  </div> -->
											  <h1 class="post-title">Step by step guide to Laravel package development</h1>
											  <span class="post-date"> Sep 19, 2020</span>
											</div>
											<div class="post-content col-md-10 offset-md-1">
												<p>Are you curious how open-source Laravel packages are developed from scratch? Or are you unsure whether any specific functionality makes a good use case to be a Laravel package?</p>
								
								<p>Let’s talk about these and other related questions today.</p>
								
								<p>We all are fans of Laravel and its ecosystem for its simplicity and extensibility. Packages have been playing a major role in moving it forward. Especially official packages by Laravel,  <a href="https://spatie.be/en/opensource">Spatie</a>  ,  <a href="https://github.com/barryvdh/">Barry vd.</a> , and others have made our lives and code better.</p>
								
								<h3>
								<a name="why-you-should-build-a-laravel-package" href="#why-you-should-build-a-laravel-package">
								</a>
								Why you should build a Laravel Package
								</h3>
								
								<p><strong>Better coding skills</strong></p>
								
								<p>Open-source is magical. Putting your code out into the public makes you a bit vulnerable at the beginning but brings out the best of you. The fear of doing something wrong prevents every bit of you from doing the  <code>git push origin master</code>  but it’s always worth it. Laracasts’ series on  <a href="https://laracasts.com/series/how-to-manage-an-open-source-project">open source project management</a> can help a lot if you’re not well-versed with GitHub.</p>
								
								<p><strong>More (and better) work</strong></p>
								
								<p>You will build you brand leading to more work.</p>
								
								<blockquote>
								<p>"Talk is cheap. Show me the code." - Linus Torvalds (creator of Linux and Git)</p>
								</blockquote>
								
								<p>As developers and clients see your code and benefit from it, you will get more recognition.</p>
								
								<p><strong>Save time</strong></p>
								
								<p>You will save yourself considerable amount of time when you convert a piece of code, that you are using in more than one projects, into a package. “DRY” approach isn’t a new thing. We know its benefits.</p>
								
								<p>In short, open-source package development makes your developer life better.</p>
								
								<p>Now that we have a better idea about the need to go ahead with package development, let’s make one together now.</p>
								
								<p>On a side note, contributing to an existing solution is also a great way to start if there is already an open-source package/library of your choice.</p>
								
								<h4>
								<a name="a-new-laravel-package-from-scratch" href="#a-new-laravel-package-from-scratch">
								</a>
								A new Laravel package from scratch
								</h4>
								
								<p><code>Note:</code>  I had said we will be building a real package. While thinking about an example, the only good option I could come up with was one of my own packages -  <a href="https://github.com/freshbitsweb/laravel-log-enhancer">Laravel Log Enhancer</a>. It is short enough to cover quickly as well as plays with important parts of package development to learn the basics properly.</p>
								
								<p><iframe width="710" height="399" src="https://www.youtube.com/embed/DQnUyQEcs_A" allowfullscreen loading="lazy">
								</iframe>
								</p>
								
								<p>If you haven’t created any Laravel package before, I insist you to do this with me.  <em>It’ll be fun</em>. Even if you make the same package, you’ll have more confidence and will be inspired to make changes or create a new one instantly. All the steps are undoable - you’ve nothing to lose. And true learning is all about doing the things practically. Our requirements are basic. If you’re already running any Laravel app locally, you’ve it all.</p>
								
								<p>Let’s start.</p>
								
								<p><strong>1. New package directory</strong></p>
								
								<p>Create a directory with a name of the package. I will call it  <code>laravel-log-enhancer</code>.<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>mkdir laravel-log-enhancer &amp;&amp; cd laravel-log-enhancer 
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p><strong>2. Love for git</strong></p>
								
								<p>Initialize a git repository. We’ll need GitHub repo to put the package online.<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>git init
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p><strong>3. composer.json</strong></p>
								
								<p>Every package starts with a  <code>composer.json</code>  file. Let’s create it. The easiest way to create it is to fire the  <code>init</code>  command.<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>composer init
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>Or you can just copy it from  <a href="https://gist.github.com/gauravmak/04badd41d58d8f27648532e93876a634">this stub</a> and make changes accordingly.</p>
								
								<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--TDyNdoRP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/t4kxstetmqwseoh7rkcf.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--TDyNdoRP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/t4kxstetmqwseoh7rkcf.png" alt="Package Composer json file" loading="lazy"></a></p>
								
								<p>Commit the change. Not compulsory but we will do it after each unique step as a good habit.</p>
								
								<p><strong>4. Namespace and autoloading</strong></p>
								
								<p>We will put the main code of our package in  <code>src</code>  directory.<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>mkdir src &amp;&amp; cd src
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>By the way, just like Laravel web app development, there are no hard rules about directory structure here but a helpful convention to follow.</p>
								
								<p>We will update our  <code>composer.json</code>  file for 2 important things.</p>
								
								<ul>
								<li>  When a Laravel project uses our package, we can inform it about the location of the files of the package to be loaded by putting the path in PSR-4 autoloading part of  <code>composer.json</code>.</li>
								<li>  To make the installation easy for the developer, we will put the location of the service provider, that should be automatically detected by Laravel, in  <code>extra</code>  section of the file.
								</li>
								</ul>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>...
								"autoload": {
								"psr-4": {
									"Freshbitsweb\\LaravelLogEnhancer\\": "src/"
								}
								},
								"extra": {
								"laravel": {
									"providers": [
										"Freshbitsweb\\LaravelLogEnhancer\\LaravelLogEnhancerServiceProvider"
									]
								}
								}
								...
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>By  <em>autoload</em>, the parent Laravel web app knows about our base namespace i.e.  <code>Freshbitsweb\LaravelLogEnhancer</code>  and the files location which is the  <code>src</code>  directory. And Laravel’s awesome  <a href="https://laravel-news.com/package-auto-discovery">package discovery</a> feature helps us remove a step from package installation process.</p>
								
								<p><strong>5. The service provider dilemma:</strong></p>
								
								<p>Many beginners stuck at this stage. Don’t worry. Let’s try to simplify this. A service provider is a file that can tell the parent Laravel application about various offerings of the package.</p>
								
								<p>Common belief is that we always need a service provider for a package. That’s not the case. If your package doesn’t need to  <em>autoload</em>  <a href="https://laravel.com/docs/packages#resources">any resources</a> in advance, it can skip the service provider. But in most of the cases, for a package to be useful enough, service provider is required.</p>
								
								<p>We will use it in our case to load the default configuration options of the package as well as offer an option to export those config options to the parent Laravel web app.<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>&lt;?php
								
								namespace Freshbitsweb\LaravelLogEnhancer;
								
								use Illuminate\Support\ServiceProvider;
								
								class LaravelLogEnhancerServiceProvider extends ServiceProvider
								{
								/**
								 * Publishes configuration file.
								 *
								 * @return  void
								 */
								public function boot()
								{
									$this-&gt;publishes([
										__DIR__.'/../config/laravel_log_enhancer.php' =&gt; config_path('laravel_log_enhancer.php'),
									], 'laravel-log-enhancer-config');
								}
								
								/**
								 * Make config publishment optional by merging the config from the package.
								 *
								 * @return  void
								 */
								public function register()
								{
									$this-&gt;mergeConfigFrom(
										__DIR__.'/../config/laravel_log_enhancer.php',
										'laravel_log_enhancer'
									);
								}
								}
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>The code is quite simple here. In the  <code>boot</code>  method, we put the code to allow the developer to export the config options by simply writing:<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>php artisan vendor:publish -tag=laravel-log-enhancer-config
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>And in the  <code>register</code>  method, we tell the Laravel app to add the config options from our file into the web app config. Commit the update and let’s create our config file next.</p>
								
								<p><strong>6. Config options:</strong></p>
								
								<p>As a part of the convention, we will put our config file in  <code>config</code>  directory inside root folder next to src directory.<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>mkdir config &amp;&amp; cd config &amp;&amp; touch laravel_log_enhancer.php 
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>Put the following code in the file.<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>&lt;?php
								
								return [
								'log_request_details' =&gt; true,
								
								'log_input_data' =&gt; true,
								
								'log_request_headers' =&gt; false,
								
								'log_session_data' =&gt; true,
								
								'log_memory_usage' =&gt; false,
								
								'log_git_data' =&gt; false,
								
								// You can specify the inputs from the user that should not be logged
								'ignore_input_fields' =&gt; ['password', 'confirm_password'],
								];
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>This file contains few configuration options just like a regular Laravel config file. Commit.</p>
								
								<p><strong>7. Package classes</strong></p>
								
								<p>Final piece of code, for actual enhancement of Laravel logs, is the  <code>LogEnhancer.php</code>  file. To keep the length of the article digestible, I will directly link you to  <a href="https://github.com/freshbitsweb/laravel-log-enhancer/blob/master/src/LogEnhancer.php">the actual class</a> that you can copy. We also have  <a href="https://github.com/freshbitsweb/laravel-log-enhancer/blob/master/src/RequestDataProcessor.php"><code>RequestDataProcessor.php</code></a> in the package. Put both of them in the  <code>src</code>  directory and you should be good to go.</p>
								
								<p><strong>8. Other important files</strong></p>
								
								<p>There are few other files that we need to add finally.</p>
								
								<ul>
								<li>  <a href="https://github.com/freshbitsweb/laravel-log-enhancer/blob/master/.gitignore">.gitignore</a>
								</li>
								<li>  <a href="https://github.com/freshbitsweb/laravel-log-enhancer/blob/master/LICENSE">LICENSE</a>
								</li>
								<li>  <a href="https://github.com/freshbitsweb/laravel-log-enhancer/blob/master/README.md">README.md</a>
								</li>
								</ul>
								
								<p>README file needs a special mention here. It is the face of the package. You should be writing detailed installation steps and other notes with proper flow in this file. Go through this  <a href="https://guides.github.com/features/wikis/">GitHub guide</a> for more.</p>
								
								<p>Commit this change and now our package is ready to use.</p>
								
								<p>What next? It’s time to release it.</p>
								
								<h4>
								<a name="how-to-release-the-package" href="#how-to-release-the-package">
								</a>
								How to release the package
								</h4>
								
								<p>If you haven’t pushed the package code to GitHub, do it first. If you don’t know how,  <a href="https://help.github.com/articles/adding-an-existing-project-to-github-using-the-command-line/">this article</a> can help.</p>
								
								<p>Then, head over to  <a href="https://packagist.org/">Packagist</a> , create an account or sign in, Click on Submit, specify the GitHub repo URL, … Steps are quite easy and self-explanatory. You should also enable Auto update of the package and consider  <a href="https://semver.org/">Semantic versioning</a> and  <a href="https://help.github.com/articles/creating-releases/">releasing</a> .</p>
								
								<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--FyxkMCqB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/euf25jnzvbbh3hlziyty.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--FyxkMCqB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/euf25jnzvbbh3hlziyty.png" alt="Packagist screenshot" loading="lazy"></a></p>
								
								<p><strong>Congrats.</strong>  We’re done. Breath for a few minutes. There’s more.</p>
								
								<p>Next, there are many other things are not part of the package development but are important for the development lifecycle and maintenance. Let’s go through them quickly.</p>
								
								<h4>
								<a name="how-to-use-the-package-locally" href="#how-to-use-the-package-locally">
								</a>
								How to use the package locally
								</h4>
								
								<p>We don’t have to push the updates online before testing it locally. Composer repositories path to the rescue.</p>
								
								<p>Not just the package, we can do it with any repository. Here’s a  <a href="https://tighten.co/blog/testing-laravel-framework-changes-locally-before-submitting-a-pull-request">great article</a> explaining the details.</p>
								
								<p>Let’s do it. Install a fresh Laravel app next to your package directory.<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>laravel new laravel-with-package
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>Make changes in it’s  <code>composer.json</code>  file<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>...
								"repositories": [
								{
									"type": "path",
									"url": "../laravel-log-enhancer"
								}
								],
								...
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>Install the package by firing the following command.<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>composer require gauravmak/laravel-log-enhancer
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>Complete the  <a href="https://github.com/freshbitsweb/laravel-log-enhancer#installation">installation steps</a> and you can use the package now.</p>
								
								<h4>
								<a name="testing" href="#testing">
								</a>
								Testing
								</h4>
								
								<blockquote>
								<p>“I find that weeks of coding and testing can save me hours of planning.” -<br>
								Unknown</p>
								</blockquote>
								
								<p>They say - do not use a package without tests. They’re right. As the package gets bigger in size and more contributors enter the scene, some random commit can break the code functionality somewhere down the line. And we never want it to happen, right?</p>
								
								<p>And it’ not hard. All we need to do it to check if the package is doing what it is supposed to do after every change/commit. In this package, we are adding processors to the Monolog handlers so that more data can be logged.</p>
								
								<p>Unfortunately, as of now, Monolog doesn’t provide a method to fetch the processors of a handler so we are limited but let’s create a base of the testing for this package so that you know how to add tests to your custom package.</p>
								
								<p>To start, we will add requirements to the  <code>composer.json</code>  file.<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>...
								"require-dev": {
								"phpunit/phpunit": "^7.0",
								"orchestra/testbench": "~3.6.0"
								},
								"autoload-dev": {
								"psr-4": {
									"Freshbitsweb\\LaravelLogEnhancer\\Test\\": "tests"
								}
								},
								...
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>We are basically testing a package which is outside a Laravel app.  <a href="https://github.com/orchestral/testbench">orchestral/testbench</a> is a great package which can add the necessary dependencies so that we can test it as if we have all the Laravel goodies.</p>
								
								<p>I have also added the following files to make the base of testing for our app.</p>
								
								<ul>
								<li>  <a href="https://github.com/freshbitsweb/laravel-log-enhancer/blob/master/phpunit.xml.dist">phpunit.xml.dist</a>
								</li>
								<li>  <a href="https://github.com/freshbitsweb/laravel-log-enhancer/blob/master/tests/LogEnhancerTest.php">LogEnhancerTest.php</a>
								</li>
								<li>  <a href="https://github.com/freshbitsweb/laravel-log-enhancer/blob/master/tests/TestCase.php">TestCase.php</a>
								</li>
								</ul>
								
								<p>Go through the README file of the testbench package for all details about how we can interact with Laravel while testing our package.</p>
								
								<h4>
								<a name="integrations" href="#integrations">
								</a>
								Integrations
								</h4>
								
								<p>There are so many helpful tools that integrate with GitHub repo and help us maintain the packages/libraries easily.</p>
								
								<p>I suggest  <a href="https://github.com/marketplace/travis-ci">Travis CI</a> for testing the package after each update and  <a href="https://github.com/marketplace/styleci">StyleCI</a> for maintaing the code style.</p>
								
								<p>I have integrated StyleCI in the package already. You should also consider  <a href="https://poser.pugx.org/">adding badges</a> to the README file.</p>
								
								<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--BTSeSEjS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kujka3mxmuct6g7x38u2.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--BTSeSEjS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/kujka3mxmuct6g7x38u2.png" alt="Package Badges" loading="lazy"></a></p>
								
								<h4>
								<a name="secret-sauce-of-a-successful-package" href="#secret-sauce-of-a-successful-package">
								</a>
								Secret sauce of a successful package
								</h4>
								
								<p>You reap the benefits of making the package when more and more developers use it. And for that, there are so many factors starting from the basic idea behind the package to the stability and age of the package (stars).</p>
								
								<p>If I were to decide on most important point for that, it would be the  <em>developer friendliness</em>  of the package. Yes, the exact reason why Laravel is popular.</p>
								
								<p>Try to minimize the installation steps and the code that is required to use the package. Plus, it has to be  <strong>readable enough</strong>  that it doen’t need to annotated with long comments.</p>
								
								<p>For example,<br>
								</p>
								
								<div class="highlight js-code-highlight">
								<pre class="highlight plaintext"><code>$users = User::with('roles')-&gt;get();
								</code></pre>
								<div class="highlight__panel js-actions-panel">
								<div class="highlight__panel-action js-fullscreen-code-action">
								<!-- <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title>
								<path d="M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z"></path>
								</svg>
								
								<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewbox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title>
								<path d="M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z"></path>
								</svg> -->
								
								</div>
								</div>
								</div>
								
								
								
								<p>So simple, we know this operation involves join queries and other stuff. Still, you like to write it and read it. Do things on a similar level.</p>
								
								<h4>
								<a name="final-notes" href="#final-notes">
								</a>
								Final notes
								</h4>
								
								<p>That’s it for the day. We learned why package development is good for everyone and how to do it step-by-step using a real example. If you have any questions or get stuck anywhere, just add a comment below, I would be happy to help.</p>
								
								<p>And If you think this can help other Laravel developers in your online network, I’d be happy to see you  <a href="https://twitter.com/intent/tweet?text=%F0%9F%94%A5Checkout%20step%20by%20step%20guide%20to%20Laravel%20package%20development%20%F0%9F%93%A6%20with%20a%20real%20example.&amp;url=https://dev.to/gauravmak/step-by-step-guide-to-laravel-package-development-4nj1&amp;via=gauravmakhecha&amp;related=laravelphp&amp;hashtags=laravel">sharing</a> this with them. Thanks.</p>
								
								
								
											</div>
			  
										</div>
									</div>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/news/4.jpg"></div>
										<a class="edina_tm_full_link" href="#"></a>
									</div>
									<div class="news_details">
										<span>Mar 18, 2021 <a href="#">BACKEND</a></span>
										<h3 class="title"><a href="#">ES modules in Node today</a></h3>
									</div>
									<div class="main_content">
										<div class="descriptions">
											<div class="post-content col-md-10 offset-md-1">
                                
												<h2>
												<a name="introduction" href="#introduction" class="anchor">
												</a>
												Introduction
												</h2>
												
												<blockquote>
												<p>“Before software can be reusable, it first has to be usable.” – <a href="https://en.wikipedia.org/wiki/Ralph_Johnson_(computer_scientist)">Ralph Johnson</a></p>
												</blockquote>
												
												<p><a href="https://en.wikipedia.org/wiki/Module">Modules</a> are independent building blocks of a software program. They are basically a design pattern that implements features of <a href="https://en.wikipedia.org/wiki/Modular_programming">m</a><a href="https://en.wikipedia.org/wiki/Modular_programming">odular design</a> in programming languages. The module system is supported in many languages and is quite popular since the way dependencies are handled, packaged, and managed determines how easy it is to work with a large and growing source code.</p>
												
												<p>In modular design, business logic pertaining to a particular feature or functionality is packaged (modularized) in a standardized format for reusability, flexibility, and for the sake of reducing complexity. This setup affords a loosely coupled system due to a smooth interface of communication, as there are no global variables or shared state.</p>
												
												<p>Although the concept of modules is <a href="https://en.wikipedia.org/wiki/Modular_programming#Terminology">quite different depending on the language</a>, they are akin to the idea of <a href="https://en.wikipedia.org/wiki/Module_pattern#Namespaces">namespaces</a> in languages like Java. Modules enable code organization by splitting a codebase into reusable components such that each performs individual functions and can be combined or composed to form larger functionalities or an entire application.</p>
												
												<p>In Node.js, the <a href="https://nodejs.org/docs/latest/api/modules.html#modules_modules">module system</a> has come a long way from its earlier adoption of <a href="https://requirejs.org/docs/commonjs.html">CommonJS</a>. Today, <a href="https://nodejs.org/dist/latest-v13.x/docs/api/esm.html#esm_ecmascript_modules">ECMAScript modules</a> (ES modules), though still <a href="https://nodejs.org/api/documentation.html#documentation_stability_index">experimental</a> at the time of writing, are the official standard for packaging code for reuse in both client- and server-side JavaScript.</p>
												
												<!-- <p><a href="https://logrocket.com/signup/"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--QIqNZKME--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2017/03/f760c-1gpjapknnuyhu8esa3z0jga.png%3Fresize%3D1200%252C280%26ssl%3D1" alt="LogRocket Free Trial Banner" loading="lazy"></a></p> -->
												
												<h2>
												<a name="table-of-contents" href="#table-of-contents" class="anchor">
												</a>
												Table of contents
												</h2>
												
												<p>In this article, we are going to learn about ES modules in Node. However, we will briefly explore other ways of handling and organizing server-side code with CommonJS.</p>
												
												<p>Why? So that we have a point of reference to recognize the benefits of ES modules. In essence, we will learn about the challenges it tries to solve that earlier module systems were not adapted to solve.</p>
												
												<p>We will be looking at:</p>
												
												<ul>
												<li>
												<strong>An introduction to ES modules</strong> — here, we introduce ES modules in an exciting way</li>
												<li>
												<strong>A brief history of ES modules</strong> — here, we learn about the transition from the earlier module system to ES modules. We will also briefly examine how interoperable these modules systems are with one another</li>
												<li>
												<strong>Adding support for ES modules in Node</strong> — here, we learn about how we can incrementally add support for ES modules in Node. We also learn how to migrate an old codebase to start using ES modules</li>
												<li>
												<strong>Comparing and contrasting features</strong> — here, we will learn about the features of both these module systems and how they compare</li>
												<li><strong>ES modules moving forward</strong></li>
												</ul>
												
												<h2>
												<a name="prerequisites" href="#prerequisites" class="anchor">
												</a>
												Prerequisites
												</h2>
												
												<p>To easily follow along with this tutorial, it is advisable to have the latest version of Node.js installed. Instructions on how to do so are available in the <a href="https://nodejs.org/en/">Node documentation</a>.</p>
												
												<p>Also, for better context, readers may need to be fairly knowledgeable with the <a href="https://requirejs.org/docs/commonjs.html">CommonJS</a> module system in Node. It is equally welcoming for newcomers learning the Node.js module system or applying ES modules in their Node projects today.</p>
												
												<h2>
												<a name="introducing-es-modules" href="#introducing-es-modules" class="anchor">
												</a>
												Introducing ES modules
												</h2>
												
												<p>With the release of <a href="https://github.com/nodejs/node/blob/master/doc/changelogs/CHANGELOG_V13.md#2020-02-18-version-1390-current-codebytere">Node version 13.9.0</a>, <a href="https://nodejs.org/api/esm.html#esm_introduction">ES modules</a> can now be used without an experimental flag since they are enabled by default. With ES modules, modules are defined with the use of the <code>import</code> and <code>export</code> keywords instead of the <code>require()</code> function in CommonJS. Here is how they are used:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="k">export</span> <span class="kd">function</span> <span class="nx">sayLanguage</span><span class="p">(</span><span class="nx">language</span><span class="p">)</span> <span class="p">{</span>
												  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`I love </span><span class="p">${</span><span class="nx">language</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span>
												<span class="p">}</span>
												
												<span class="c1">//f.js</span>
												
												
												<span class="k">import</span> <span class="p">{</span><span class="nx">sayLanguage</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./f.js</span><span class="dl">'</span><span class="p">;</span>
												
												<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sayLanguage</span><span class="p">(</span><span class="dl">'</span><span class="s1">JavaScript</span><span class="dl">'</span><span class="p">));</span>
												
												<span class="c1">//g.js</span>
												
												
												<span class="nx">retina</span><span class="p">@</span><span class="nd">alex</span> <span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span> <span class="o">%</span> <span class="nx">node</span> <span class="o">-</span><span class="nx">v</span>
												<span class="nx">v13</span><span class="p">.</span><span class="mf">7.0</span>
												<span class="nx">retina</span><span class="p">@</span><span class="nd">alex</span> <span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span> <span class="o">%</span> <span class="nx">node</span> <span class="nx">g</span><span class="p">.</span><span class="nx">js</span> 
												<span class="p">(</span><span class="nx">node</span><span class="p">:</span><span class="mi">77133</span><span class="p">)</span> <span class="nx">ExperimentalWarning</span><span class="p">:</span> <span class="nx">The</span> <span class="nx">ESM</span> <span class="nx">module</span> <span class="nx">loader</span> <span class="nx">is</span> <span class="nx">experimental</span><span class="p">.</span>
												<span class="nx">I</span> <span class="nx">love</span> <span class="nx">JavaScript</span><span class="o">!</span>
												<span class="kc">undefined</span>
												<span class="nx">retina</span><span class="p">@</span><span class="nd">alex</span> <span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span> <span class="o">%</span>
												</code></pre></div>
												
												
												
												<p>Details about these keyword bindings can be found in the spec <a href="https://tc39.es/ecma262/#prod-ModuleItem">here</a>. Also, we can peek at the Mozilla development network <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements">doc</a> for more information.</p>
												
												<blockquote>
												<p><strong>Note</strong> : The code snippet above shows the <code>ExperimentalWarning</code> for the module loader due to the Node version on my local machine. However, it is likely this would change in later Node versions.</p>
												</blockquote>
												
												<h2>
												<a name="adding-support-for-es-modules-in-node-today" href="#adding-support-for-es-modules-in-node-today" class="anchor">
												</a>
												Adding support for ES modules in Node today
												</h2>
												
												<p>This support was previously behind the <code>--experimental-module</code> flag. Though this is no longer required, the implementation remains experimental and subject to change.</p>
												
												<p>Files ending with <code>.mjs</code> or <code>.js</code> extensions (with the nearest <code>package.json</code> file with a field <code>type</code>) are treated as ES modules, as shown on <code>line 9</code> below:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="p">{</span>
												<span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">es_modules_in_node</span><span class="dl">"</span><span class="p">,</span>
												<span class="dl">"</span><span class="s2">version</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.0.0</span><span class="dl">"</span><span class="p">,</span>
												<span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">A sample for enabling ES Modules in Node.js</span><span class="dl">"</span><span class="p">,</span>
												<span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">g.js</span><span class="dl">"</span><span class="p">,</span>
												<span class="dl">"</span><span class="s2">scripts</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
												  <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">echo </span><span class="se">\"</span><span class="s2">Error: no test specified</span><span class="se">\"</span><span class="s2"> &amp;&amp; exit 1</span><span class="dl">"</span>
												<span class="p">},</span>
												<span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">module</span><span class="dl">"</span><span class="p">,</span>
												<span class="dl">"</span><span class="s2">keywords</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
												  <span class="dl">"</span><span class="s2">ES</span><span class="dl">"</span><span class="p">,</span>
												  <span class="dl">"</span><span class="s2">MODULES</span><span class="dl">"</span><span class="p">,</span>
												  <span class="dl">"</span><span class="s2">NODE</span><span class="dl">"</span><span class="p">,</span>
												  <span class="dl">"</span><span class="s2">MODULES</span><span class="dl">"</span><span class="p">,</span>
												  <span class="dl">"</span><span class="s2">JS</span><span class="dl">"</span>
												<span class="p">],</span>
												<span class="dl">"</span><span class="s2">author</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Alexander Nnakwue</span><span class="dl">"</span><span class="p">,</span>
												<span class="dl">"</span><span class="s2">license</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">MIT</span><span class="dl">"</span>
												<span class="p">}</span>
												</code></pre></div>
												
												
												
												<p>So, in essence, when we run <code>node g.js</code> in the same folder as the above <code>package.json</code>, the file is treated as an ESM. Additionally, it is an ESM if we are passing string arguments to the Node.js standard input with flag <code>--input-type=module</code>.</p>
												
												<blockquote>
												<p><strong>Note</strong> : Without the <code>type</code> field in the parent <code>package.json</code> file, Node throws the error shown below:<br>
												</p>
												</blockquote>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="p">(</span><span class="nx">node</span><span class="p">:</span><span class="mi">2844</span><span class="p">)</span> <span class="nx">Warning</span><span class="p">:</span> <span class="nx">To</span> <span class="nx">load</span> <span class="nx">an</span> <span class="nx">ES</span> <span class="nx">module</span><span class="p">,</span> <span class="kd">set</span> <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">module</span><span class="dl">"</span> <span class="k">in</span> <span class="nx">the</span> <span class="kr">package</span><span class="p">.</span><span class="nx">json</span> <span class="nx">or</span> <span class="nx">use</span> <span class="nx">the</span> <span class="p">.</span><span class="nx">mjs</span> <span class="nx">extension</span><span class="p">.</span>
												</code></pre></div>
												
												
												
												<h2>
												<a name="package-scope" href="#package-scope" class="anchor">
												</a>
												Package scope
												</h2>
												
												<p>A package scope, defined by the <code>type</code> flag in a parent <code>package.json</code> file and all folders below it, is present in the current scope of that package, as explained earlier. Furthermore, files ending with the <code>.mjs</code> extension are always loaded as ES modules regardless of the scope of that package.</p>
												
												<p>In the same light, all other forms of files without extensions and without the <code>type</code> flag in the parent <code>package.json</code> file are treated as CommonJS. Additionally, files ending with <code>.cjs</code> extensions are treated as CJS modules regardless of package scope.</p>
												
												<h2>
												<a name="import-and-export-syntax" href="#import-and-export-syntax" class="anchor">
												</a>
												Import and export syntax
												</h2>
												
												<p>In ES modules, specifiers are like string-based file paths used after the <code>from</code> keyword. There are both <a href="https://nodejs.org/api/esm.html#esm_resolution_algorithm">algorithms</a> to load an ES module specifier and to determine the module format of a resolved URL. An example is shown below:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="k">import</span> <span class="p">{</span><span class="nx">cat</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">animals</span><span class="dl">'</span><span class="p">;</span>
												</code></pre></div>
												
												
												
												<p>The <code>animal</code> specifier in this case is an npm package, for example. Other ways specifiers can be referenced include from both absolute and relative file paths or URLs, and paths within other packages. Examples are shown in this <a href="https://nodejs.org/api/esm.html#esm_import_specifiers">section</a> of the documentation.</p>
												
												<p>Although <code>import</code> statements are permitted only in ES modules, they can reference both an ESM or CommonJS modules. For example:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="k">import</span> <span class="nx">packageMain</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">commonjs-package</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// Works</span>
												
												<span class="k">import</span> <span class="p">{</span> <span class="nx">method</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">commonjs-package</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// Errors</span>
												</code></pre></div>
												
												
												
												<blockquote>
												<p><strong>Note</strong> : <a href="https://nodejs.org/api/esm.html#esm_import_statements">Import statements</a> that reference other types of files like JSON or Wasm are still experimental and require the <code>--experimental-json-modules</code> and <code>--experimental-wasm-modules</code> flags, respectively, to be passed. Details can be found <a href="https://nodejs.org/api/esm.html#esm_experimental_json_modules">here</a>.</p>
												</blockquote>
												
												<p>For exports in ES modules, we can make use of the following:</p>
												
												<ul>
												<li>Named exports
												</li>
												</ul>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Alex</span><span class="dl">"</span>
												</code></pre></div>
												
												
												
												<ul>
												<li>Default exports
												</li>
												</ul>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">sayName</span><span class="p">()</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">My name is Mat</span><span class="dl">'</span><span class="p">)}</span>
												</code></pre></div>
												
												
												
												<blockquote>
												<p><strong>Note</strong> : All built-in Node packages support all types of exports (named, default) described above.</p>
												</blockquote>
												
												<h2>
												<a name="package-entry-points" href="#package-entry-points" class="anchor">
												</a>
												Package entry points
												</h2>
												
												<p>There are now two fields that can define entry points for a package: <code>main</code> and <code>exports</code>. More details can be found in the <a href="https://nodejs.org/api/esm.html#esm_package_entry_points">documentation</a>.</p>
												
												<blockquote>
												<p><strong>Note</strong> : Despite the current support for ES modules in Node, there are still some known concerns with interoperability with CommonJS. We will explore this further in the section on interoperability.</p>
												</blockquote>
												
												<h2>
												<a name="commonjs-module-system" href="#commonjs-module-system" class="anchor">
												</a>
												CommonJS module system
												</h2>
												
												<p>Prior to the introduction of ES modules, the community relied heavily on CommonJS for packaging server-side JavaScript code. In the CommonJS module system, each file is treated as a module, which exposes a set of APIs (via a well-defined interface) with the use of the <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#exports"><code>exports</code> object</a>. To understand this better, here is an example using the object created by the module system:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="kd">function</span> <span class="nx">sayName</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
												  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`My name is </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">.`</span><span class="p">)</span>
												<span class="p">};</span>
												
												<span class="kd">function</span> <span class="nx">sayAge</span><span class="p">(</span><span class="nx">age</span><span class="p">){</span>
												<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`I'm </span><span class="p">${</span><span class="nx">age</span><span class="p">}</span><span class="s2"> years old.`</span><span class="p">)</span>
												<span class="p">};</span>
												
												
												<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span><span class="nx">sayName</span><span class="p">,</span> <span class="nx">sayAge</span><span class="p">};</span>
												<span class="c1">//a.js</span>
												</code></pre></div>
												
												
												
												<p>To use these functions (imported as modules in a different file), we can use the <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#requireid"><code>require</code> function</a>. This accepts a module identifier (ID) specified by either a relative or an absolute path or by name, based on the module type of the exposed APIs, like so:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">sayName</span><span class="p">,</span> <span class="nx">sayAge</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./a</span><span class="dl">'</span><span class="p">)</span> 
												<span class="c1">// assuming a.js is in the same folder path</span>
												
												<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sayName</span><span class="p">(</span><span class="dl">'</span><span class="s1">Alex</span><span class="dl">'</span><span class="p">))</span> <span class="c1">// My name is Alex.</span>
												
												<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sayAge</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span> <span class="c1">// I'm 25 years old.</span>
												
												<span class="c1">//b.js</span>
												<span class="c1">//TO RUN THE CODE SAMPLE TYPE: $ node b.js on your terminal</span>
												</code></pre></div>
												
												
												
												<p>As we can see above, the <code>require</code> object returns the module content exported from the <code>a.js</code> file. To learn more about the <a href="https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L187">implementation</a> of the <code>module</code>, <code>export</code>, and <code>require</code> keywords, we can peek at the module wrapper <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#the-module-wrapper">here</a>.</p>
												
												<p>The CommonJS specification is also available <a href="https://github.com/commonjs/commonjs/blob/master/docs/specs/modules/1.0.html.markdown">here</a>. The spec <a href="https://github.com/commonjs/commonjs/blob/master/docs/specs/modules/1.0.html.markdown#commonjs-modules">highlights</a> the minimum features that a module system must have in order to support and be interoperable with other module systems.</p>
												
												<p>The CommonJS implementation allows for a defined structure in how files are loaded. In this approach, code required from other files are loaded or parsed synchronously. For this reason, catching and detecting failure points or debugging code are easier and less tedious.</p>
												
												<p>Why? Because variables present in the modules or exported files are within the scope of that module or private to it and not in the global scope, as such errors are properly propagated. Also, because of the huge separation of concern, modules are loaded from parent to child, traversing down the dependency graph.</p>
												
												<blockquote>
												<p><strong>Note</strong> : When the wrapper function returns, the exports object is cached, then returned as the return value for the <code>require()</code> method. This is like a cycle. How? On the next call to the <code>module.exports</code> method, the same process of wrapping the module with the wrapper function is repeated. But not without checking if that module is already stored in the cache.</p>
												</blockquote>
												
												<p>The signature of the wrapper function is shown below:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">__filename</span><span class="p">,</span> <span class="nx">__dirname</span><span class="p">)</span> <span class="p">{</span>
												<span class="c1">// Module code actually lives in here</span>
												<span class="p">});</span>
												</code></pre></div>
												
												
												
												<p>The <code>Module</code> object, which takes in an ID and a parent module as parameters, contains the <code>export</code> object:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="kd">function</span> <span class="nx">Module</span><span class="p">(</span><span class="nx">id</span> <span class="o">=</span> <span class="dl">''</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
												<span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
												<span class="k">this</span><span class="p">.</span><span class="nx">path</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">dirname</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
												<span class="k">this</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>
												<span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
												<span class="nx">updateChildren</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
												<span class="k">this</span><span class="p">.</span><span class="nx">filename</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
												<span class="k">this</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
												<span class="k">this</span><span class="p">.</span><span class="nx">children</span> <span class="o">=</span> <span class="p">[];</span>
												<span class="p">};</span>
												</code></pre></div>
												
												
												
												<p>The <code>updateChildren</code> method scans through the file path until the root of the file system is reached. Its job is to update the <code>children</code> property of the <code>Module</code> object with the new <code>parent</code>, as the case may be. Here is the signature below:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="kd">function</span> <span class="nx">updateChildren</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">scan</span><span class="p">)</span> <span class="p">{</span>
												<span class="kd">const</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
												<span class="k">if</span> <span class="p">(</span><span class="nx">children</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">scan</span> <span class="o">&amp;&amp;</span> <span class="nx">children</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">child</span><span class="p">)))</span>
												 <span class="nx">children</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>
												<span class="p">}</span>
												</code></pre></div>
												
												
												
												<p>Let’s see an example to understand this better. In the <code>b.js</code> file above, add this line of code to print the module and the argument object:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
												</code></pre></div>
												
												
												
												<p>After running <code>node b.js</code>, we get the following output:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="nx">retina</span><span class="p">@</span><span class="nd">alex</span> <span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span> <span class="o">%</span> <span class="nx">node</span> <span class="nx">b</span><span class="p">.</span><span class="nx">js</span>
												<span class="nx">My</span> <span class="nx">name</span> <span class="nx">is</span> <span class="nx">Alex</span><span class="p">.</span>
												<span class="kc">undefined</span>
												<span class="nx">I</span><span class="dl">'</span><span class="s1">m 25 years old.
												undefined
												&lt;ref *1&gt; Module {
												id: </span><span class="dl">'</span><span class="p">.</span><span class="dl">'</span><span class="s1">,
												path: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="dl">'</span><span class="s1">,
												exports: {},
												parent: null,
												filename: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">b</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
												loaded: false,
												children: [
												  Module {
													id: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">a</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
													path: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="dl">'</span><span class="s1">,
													exports: [Object],
													parent: [Circular *1],
													filename: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">a</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
													loaded: true,
													children: [],
													paths: [Array]
												  }
												],
												paths: [
												  </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
												  </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
												  </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
												  </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
												  </span><span class="dl">'</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">
												]
												} [Arguments] {
												</span><span class="dl">'</span><span class="mi">0</span><span class="dl">'</span><span class="s1">: {},
												</span><span class="dl">'</span><span class="mi">1</span><span class="dl">'</span><span class="s1">: [Function: require] {
												  resolve: [Function: resolve] { paths: [Function: paths] },
												  main: Module {
													id: </span><span class="dl">'</span><span class="p">.</span><span class="dl">'</span><span class="s1">,
													path: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="dl">'</span><span class="s1">,
													exports: {},
													parent: null,
													filename: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">b</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
													loaded: false,
													children: [Array],
													paths: [Array]
												  },
												  extensions: [Object: null prototype] {
													</span><span class="dl">'</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">: [Function (anonymous)],
													</span><span class="dl">'</span><span class="p">.</span><span class="nx">json</span><span class="dl">'</span><span class="s1">: [Function (anonymous)],
													</span><span class="dl">'</span><span class="p">.</span><span class="nx">node</span><span class="dl">'</span><span class="s1">: [Function (anonymous)]
												  },
												  cache: [Object: null prototype] {
													</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">b</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">: [Module],
													</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">a</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">: [Module]
												  }
												},
												</span><span class="dl">'</span><span class="mi">2</span><span class="dl">'</span><span class="s1">: Module {
												  id: </span><span class="dl">'</span><span class="p">.</span><span class="dl">'</span><span class="s1">,
												  path: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="dl">'</span><span class="s1">,
												  exports: {},
												  parent: null,
												  filename: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">b</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
												  loaded: false,
												  children: [ [Module] ],
												  paths: [
													</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
													</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
													</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
													</span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">,
													</span><span class="dl">'</span><span class="o">/</span><span class="nx">node_modules</span><span class="dl">'</span><span class="s1">
												  ]
												},
												</span><span class="dl">'</span><span class="mi">3</span><span class="dl">'</span><span class="s1">: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="o">/</span><span class="nx">b</span><span class="p">.</span><span class="nx">js</span><span class="dl">'</span><span class="s1">,
												</span><span class="dl">'</span><span class="mi">4</span><span class="dl">'</span><span class="s1">: </span><span class="dl">'</span><span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">retina</span><span class="o">/</span><span class="nx">Desktop</span><span class="o">/</span><span class="nx">es</span><span class="o">-</span><span class="nx">modules</span> <span class="k">in</span> <span class="nx">Node</span><span class="dl">'</span><span class="s1">
												}
												</span></code></pre></div>
												
												
												
												<p>As shown above, we can see the <a href="https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L156">module object</a> on line 6 with all the properties, including the <code>filename</code>, <code>id</code>, <code>children</code>, path depth, etc. Also, we can see the <code>argument</code> object, which consists of the <code>export</code> object, <code>require</code> function, file and folder path, and the <code>Module</code> (which is essentially what the wrapper function does, but it executes the code contained in a file/module).</p>
												
												<p>Finally, as an exercise, we can go ahead and print the <code>require</code> function in the <code>b.js</code> file. To learn more about the output of the <code>require</code> function, we can check the <a href="https://github.com/nodejs/node/blob/master/lib/internal/modules/cjs/loader.js#L1087">implementation</a> in this section of the Node source code.</p>
												
												<blockquote>
												<p><strong>Note</strong> : Special emphasis should be placed on the <code>load</code> and <code>validateString</code> methods. The <code>validateString</code> method, as its name implies, checks whether the passed-in module ID is a valid string. To understand the require function on a much higher level, you can check the <a href="https://nodejs.org/en/knowledge/getting-started/what-is-require/">Knowledge section</a> of the Node documentation.</p>
												</blockquote>
												
												<h2>
												<a name="interoperability-for-both-module-systems" href="#interoperability-for-both-module-systems" class="anchor">
												</a>
												Interoperability for both module systems
												</h2>
												
												<p>In CommonJS, <a href="https://github.com/nodejs/ecmascript-modules/blob/modules-lkgr/doc/api/modules.md#the-module-wrapper">modules are wrapped as functions</a> before they are evaluated at runtime. For ES modules, code reuse provided via <code>import</code> and <code>export</code> <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#21-types">binding</a> are already <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#31-async-loading">created or loaded</a> asynchronously before they are evaluated. To understand how ESM works under the hood, you can check <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#22-operations">here</a>. Now let’s explore further 🙂</p>
												
												<p>For a quick comparison, a CommonJS module goes through this phase in its lifecycle:</p>
												
												<p><em>Resolution –&gt; Loading –&gt; Wrapping –&gt; Evaluation –&gt; Caching</em></p>
												
												<p>This validates the fact that for CommonJS, there is no way to determine what gets exported as a module until the module is wrapped and evaluated. This is quite different for ES modules, as the imported symbols are already <a href="https://github.com/nodejs/node-eps/blob/master/002-es-modules.md#22-operations">parsed and understood by the language</a> before the code gets evaluated.</p>
												
												<p>When the code is parsed, just before it is evaluated, an internal <a href="https://tc39.es/ecma262/#sec-source-text-module-records">Module Record</a> is created, and only after this data structure is well-formed are the files parsed and the code evaluated.</p>
												
												<p>For example:<br>
												</p>
												
												<div class="highlight"><pre class="highlight jsx"><code><span class="c1">//d.mjs</span>
												<span class="kd">const</span> <span class="nx">check</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
												<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Just checking`);
												};
												export.check = check;
												
												
												//e.mjs assuming they are on the same folder path
												import {check} from </span><span class="dl">'</span><span class="p">.</span><span class="o">/</span><span class="nx">d</span><span class="dl">'</span><span class="s1">
												</span></code></pre></div>
												
												
												
												<p>In the <code>e.mjs</code> file above, Node.js parses and validates the imports before going further to execute or evaluate the piece of code. This is not the case for a CommonJS module: the exported symbols are only made known after the module is wrapped and evaluated.</p>
												
												<p>This incompatibility is one of the many reasons the standard body in charge of ECMAScript intended to implement interoperability for both ESM and Node’s existing CommonJS module system.</p>
												
												<p>Furthermore, the <a href="https://nodejs.org/api/esm.html#esm_customizing_esm_specifier_resolution_algorithm">current specifier resolution</a> does not support all default behavior of the CommonJS loader. One of the major differences is automatic resolution of file extensions and the ability to import directories that have an index file.</p>
												
												<p>For example, if we do an <code>import './directory'</code> from, say, a directory that has an <code>index.js</code>, ES modules does not look for an <code>index.js</code> file in the specified folder, as was the case in CommonJS. Instead, it throws an error. This can be fixed by passing the experimental flag <code>--experimental-specifier-resolution=[mode]</code>.</p>
												
												<blockquote>
												<p><strong>Note</strong> : To customize the default module resolution, loader hooks can optionally be provided via the <code>--experimental-loader ./loader-name.mjs</code> argument to Node.js. The loaders APIs are currently being redesigned, which means they would change in the future.</p>
												</blockquote>
												
												<p>More details about interoperability with CommonJS can be found in this <a href="https://nodejs.org/api/esm.html#esm_interoperability_with_commonjs">section</a> of the documentation.</p>
												
												<h2>
												<a name="features-of-both-module-systems" href="#features-of-both-module-systems" class="anchor">
												</a>
												Features of both module systems
												</h2>
												
												<ul>
												<li>Dynamic <code>import()</code> is supported in both CommonJS and ES modules. It can be used to include ES module files from CommonJS code.</li>
												<li>ECMAScript 6 also provides that modules can be loaded from a URL, while CommonJS is limited to relative and absolute file paths. <a href="https://nodejs.org/api/esm.html#esm_https_loader">This new improvement</a> not only makes loading more complicated, but also slow.</li>
												<li>Sources that are in formats Node.js doesn’t understand can be converted into JavaScript. More details can be found <a href="https://nodejs.org/api/esm.html#esm_transpiler_loader">here</a>.</li>
												<li>Support for <a href="https://github.com/WICG/import-maps#extension-less-imports">extensionless main entry points</a> in ESM has been dropped.</li>
												<li>In the current release of the standard, loading internal modules from disk has been enabled, as specified in the <a href="https://github.com/nodejs/node/pull/31321">changelog</a>.</li>
												<li>
												<a href="https://github.com/tc39/proposal-import-meta">proposal-import-meta</a> provides the absolute URL of the current ES module file. It is currently a stage 3 proposal in the TC39 spec.</li>
												<li>The dynamic imports proposal, currently in stage 4 of the TC39 draft, can be used to import both ES and CommonJS modules. Note that this statement returns a promise.</li>
												<li>A file extension must be provided when using the <code>import</code> keyword. Directory indexes (e.g., <code>'./database/index.js'</code>) must be fully specified.</li>
												<li>Dual CommonJS and ESM are now possible with the use of <a href="https://nodejs.org/api/esm.html#esm_conditional_exports">conditional exports.</a> Now, Node.js can run ES module entry points, and a package can contain both CommonJS and ESM entry points.</li>
												</ul>
												
												<blockquote>
												<p><strong>Note</strong> : Function <code>require</code> shouldn’t be used in ES modules.</p>
												</blockquote>
												
												<h2>
												<a name="es-modules-moving-forward" href="#es-modules-moving-forward" class="anchor">
												</a>
												ES modules moving forward
												</h2>
												
												<p>ES modules is still tagged experimental since the feature is not fully ready for production environments. This is because there is a need to remove current changes that lack support for backwards compatibility.</p>
												
												<p>The challenge, therefore, is upon package authors, maintainers, and developers to be explicit with package naming and other useful conventions. More details about this can be found <a href="https://nodejs.org/api/esm.html#esm_writing_dual_packages_while_avoiding_or_minimizing_hazards">here</a>.</p>
												
												<blockquote>
												<p>“The main goal is to preserve backward compatibility moving forward, now that Node.js supports both CommonJS and ES modules.”</p>
												</blockquote>
												
												<p>Nowadays, it is possible to use both CommonJS and ESM in one application, but there are still some issues associated with it. CommonJS modules need to know if the module being loaded is a CommonJS or an ES module since the latter is loaded only asynchronously.</p>
												
												<p>Also, in accordance with the ESM spec, using the <code>import</code> keyword does not complete the file path by default with the file name extension, as for CommonJS modules. Therefore, this must be explicitly stated.</p>
												
												<h2>
												<a name="conclusion-and-next-steps" href="#conclusion-and-next-steps" class="anchor">
												</a>
												Conclusion and next steps
												</h2>
												
												<p>Prior to the introduction of the ES6 standard, there wasn’t any native implementation for organizing source code in server-side JavaScript. The community relied heavily on CommonJS module format.</p>
												
												<p>Nowadays, with the introduction of ES modules, developers can enjoy the many benefits associated with the release specification. This article has highlighted the transition between both module systems and their interoperability.</p>
												
												<p>Finally, due to the existing incompatibility issues between both module formats, the current transition from CommonJS to ESM would be quite a challenge due to the issues we have highlighted in this article. Tools like <a href="https://babeljs.io/">Babel</a> and <a href="https://github.com/standard-things/esm#readme">esm</a>, which translate the newer syntax into code compatible with older environments, can make the transition easier.</p>
												
												<p>In the long run, this entire draft process is an important step and paves the way for further future improvements. Let me know if you have any questions in the comment section below, or message me on my <a href="https://twitter.com/alex_nnakwue">Twitter handle</a>. Thanks for reading 🙂</p>
												
												
												<hr>
												
												<h2>
												<a name="200s-only-%E2%80%8E-monitor-failed-and-show-graphql-requests-in-production" href="#200s-only-%E2%80%8E-monitor-failed-and-show-graphql-requests-in-production" class="anchor">
												</a>
												200's only ‎✅: Monitor failed and show GraphQL requests in production
												</h2>
												
												<p>While GraphQL has some features for debugging requests and responses, making sure GraphQL reliably serves resources to your production app is where things get tougher. If you’re interested in ensuring network requests to the backend or third party services are successful, <a href="https://www2.logrocket.com/signup-lr">try LogRocket.</a></p>
												
												<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--UHOs84WY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/jd2amkhuiynfjf3i33qk.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--UHOs84WY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/jd2amkhuiynfjf3i33qk.png" alt="Alt Text" loading="lazy"></a></p>
												
												<p><a href="https://www2.logrocket.com/signup-lr">LogRocket</a> is like a DVR for web apps, recording literally everything that happens on your site. Instead of guessing why problems happen, you can aggregate and report on problematic GraphQL requests to quickly understand the root cause. In addition, you can track Apollo client state and inspect GraphQL queries' key-value pairs.</p>
												
												<p>LogRocket instruments your app to record baseline performance timings such as page load time, time to first byte, slow network requests, and also logs Redux, NgRx, and Vuex actions/state. <a href="https://www2.logrocket.com/signup-lr">Start monitoring for free.</a></p>
												
												
												<hr>
												
												<!-- <p>The post <a href="https://blog.logrocket.com/es-modules-in-node-today/">ES modules in Node today</a> appeared first on <a href="https://blog.logrocket.com">LogRocket Blog</a>.</p>
												-->
															</div>
										</div>
									</div>
								</div>
							</li>
							<li>
								<div class="list_inner">
									<div class="image">
										<img src="img/thumbs/1-1.jpg" alt="" />
										<div class="main" data-img-url="img/news/5.jpg"></div>
										<a class="edina_tm_full_link" href="#"></a>
									</div>
									<div class="news_details">
										<span>Apr 3, 2019 <a href="#">FRONTEND</a></span>
										<h3 class="title"><a href="#">Build Angular Like An Architect</a></h3>
									</div>
									<div class="main_content">
										<div class="descriptions">
											<div class="row">
												<div class="post-heading col-md-8 offset-md-2">
												  <!-- <div class="categories">
													<a class="category-name" href="../category/web-design/index.html">Frontend</a>
												  </div> -->
												  <h1 class="post-title">Build Angular Like An Architect</h1>
												  <span class="post-date">Apr 3, 2019</span>
												</div>
												<div class="post-content col-md-10 offset-md-1">
												  
												  <p>Since Angular 2 was in released I've been experimenting with different ways to build apps. Most developers don't need to worry about how their application is built because @angular/cli makes it so easy. The cli hides all the complexity and for good reason. Engineers need to focus on implementing features and bugfixes. Let's face it. Building complex enterprise applications is difficult. It can be a lot of work to put all the pieces together, let alone make build tooling do things like code split an application.</p>
									
												  <p>In Build Angular Like An Architect (Part 1) we briefly look at why someone would want to write a custom Angular build and how we got here. We then scaffold a new Builder using the API provided in @angular-devkit/architect package, code the build with RxJS Observables and learn how to extend the @angular/cli with a new production build that bundles Angular with Closure Compiler instead of Webpack.</p>
												  
												  <p>You can check out the code <a href="https://github.com/steveblue/architect">in this Github repository</a>.</p>
												  
												  <h3>
													<a name="how-did-we-get-here" href="#how-did-we-get-here" class="anchor">
													</a>
													How did we get here?
												  </h3>
												  
												  <p>Ever since the @angular/cli moved to webpack it was hard to integrate with other build tooling and still retain the benefits of the cli. Only a few efforts have been made to extend the cli. <a href="https://nx.dev">nx</a> is one example, going as far to enable faster development in a monorepo, incrementally building only code that has changed. The cli was so tightly coupled with webpack at times it led to awkward customization of webpack itself.</p>
												  
												  <p><a href="https://i.giphy.com/media/JGF7ctowtLGak/giphy.gif" class="article-body-image-wrapper"><img src="https://i.giphy.com/media/JGF7ctowtLGak/giphy.gif" alt="eject" loading="lazy"></a></p>
												  
												  <p>Prior to Angular 6 you could eject the webpack config with <code>ng eject</code> to customize it.</p>
												  
												  <p>With the release of Angular 6 this API was deprecated when a complete rewrite of @angular/cli abstracted portions of the tool. The cli became a wrapper around @angular-devkit. Running a <code>ng</code> command just meant you were triggering "architect" targets that ran "builders". This kind of abstraction makes tools like nx possible.</p>
												  
												  <p>The useful bits of the API are as follows:</p>
												  
												  <ul>
												  <li>Builders enable you to code custom builds with TypeScript and RxJS</li>
												  <li>Architect lets you to define targets that run Builders</li>
												  <li>Architect CLI provides a way to test builders in a workspace</li>
												  </ul>
												  
												  <p>Advanced users could customize a their tooling enough to provide a custom webpack config by coding a Builder and using Architect to establish targets that execute the Builder. If you did though you ran the risk of breaking changes in the API which was due to become stable in Angular 8. @angular-devkit/architect was considered experimental, that is up until <a href="https://github.com/angular/angular-cli/commit/e41e10d313ad49e632ed1f9d6e7e563b3eb2fd09">commits like this one</a> landed in the @angular/cli repository on Github.</p>
												  
												  <h1>
													<a name="angulardevkitarchitect-is-stable" href="#angulardevkitarchitect-is-stable" class="anchor">
													</a>
													@angular-devkit/architect is stable!
												  </h1>
												  
												  <p>This is such a game changer for one reason alone. @angular/cli is becoming extensible.</p>
												  
												  <p><a href="https://i.giphy.com/media/kVRBvsiOyBM8o/giphy.gif" class="article-body-image-wrapper"><img src="https://i.giphy.com/media/kVRBvsiOyBM8o/giphy.gif" alt="" loading="lazy"></a></p>
												  
												  <p>Builders allow us to extend the Angular CLI to do things we never thought were possible before!</p>
												  
												  <p>Here are a few examples of how you could extend the CLI with a Builder.</p>
												  
												  <ul>
												  <li>Run unit tests with Jest instead of Karma</li>
												  <li>Execute e2e tests with TestCafe instead of Selenium and Protractor</li>
												  <li>Optimize production bundles with a tool other than Webpack</li>
												  <li>Use a custom node server</li>
												  <li>Provide a custom Webpack config like <a href="https://github.com/angular/angular-cli/tree/master/packages/angular_devkit/build_webpack">@angular-devkit/build-webpack</a>
												  </li>
												  </ul>
												  
												  <p>When using the Builder API we get all these wonderful features / behaviors out of the box!</p>
												  
												  <ul>
												  <li>RxJS Observables</li>
												  <li>Composable</li>
												  <li>Testable</li>
												  <li>Loggers</li>
												  <li>Progress tracking</li>
												  <li>Error reporters</li>
												  <li>Schedulers</li>
												  </ul>
												  
												  <p>In this tutorial we look at building Angular by coding a Builder that optimizes an application with Closure Compiler.</p>
												  
												  <h2>
													<a name="enter-closure-compiler" href="#enter-closure-compiler" class="anchor">
													</a>
													Enter Closure Compiler
												  </h2>
												  
												  <p>@angular/cli is dependent on webpack and terser for bundling and optimizing JavaScript. These tools do an excellent job, but there is another that does even better.</p>
												  
												  <p><a href="https://developers.google.com/closure/compiler/">Closure Compiler</a> is a tool used at Google for optimizing JavaScript for production. From the official website:</p>
												  
												  <blockquote>
												  <p>Closure Compiler is a tool for making JavaScript download and run faster. Instead of compiling from a source language to machine code, it compiles from JavaScript to better JavaScript. It parses your JavaScript, analyzes it, removes dead code and rewrites and minimizes what's left. It also checks syntax, variable references, and types, and warns about common JavaScript pitfalls.</p>
												  </blockquote>
												  
												  <p>At ng-conf 2017 the Angular team announced the AOT compiler is compatible with Closure Compiler in Angular 4. The AOT compiler converts TypeScript type annotations to JSDoc style annotations Closure Compiler can interpret. You can unlock this feature with a compiler flag. Behind the scenes a tool called tsickle converts the annotations. This feature would enable wide adoption of Angular at Google where teams are mandated to optimize JavaScript with Closure Compiler.</p>
												  
												  <p><a href="https://i.giphy.com/media/3SBi8gMf8BqBG/giphy.gif" class="article-body-image-wrapper"><img src="https://i.giphy.com/media/3SBi8gMf8BqBG/giphy.gif" alt="" loading="lazy"></a></p>
												  
												  <p>The Angular community was rallying around webpack at ng-conf 2017, however I was naturally curious about Closure Compiler. At development conferences you might find me listening in on a talk, typing away on my laptop experimenting with something I just learned about. At ng-conf I coded a proof of concept where I could bundle Angular with Closure Compiler. The results were impressive.</p>
												  
												  <h2>
													<a name="every-bundle-i-threw-at-closure-compiler-optimized-better-than-webpack-and-uglify-and-terser" href="#every-bundle-i-threw-at-closure-compiler-optimized-better-than-webpack-and-uglify-and-terser" class="anchor">
													</a>
													Every bundle I threw at Closure Compiler optimized better than Webpack and Uglify (and Terser).
												  </h2>
												  
												  <p><a href="https://i.giphy.com/media/l3q2DgSFjbAyseViM/giphy.gif" class="article-body-image-wrapper"><img src="https://i.giphy.com/media/l3q2DgSFjbAyseViM/giphy.gif" alt="" loading="lazy"></a></p>
												  
												  <p>Angular must be built ahead of time (AOT) and the ahead of time compiled code. Closure Compiler must be in ADVANCED_OPTIMIZATIONS mode to ensure the smallest bundle possible. It also doesn't hurt to use @angular-devkit/build-optimizer. When the new Ivy compiler is final (Angular 9) we will see even better optimizations, but for now we have the AOT compiler.</p>
												  
												  <p>The Angular community is quite fortunate that Angular is compatible with Closure Compiler, however adoption has been slow because Angular CLI only supported Webpack. Not many other libraries or frameworks can claim to be able to generate bundles fully optimized with Closure Compiler. <a href="https://github.com/facebook/react/issues/11092">The React team</a> gave up trying to support Closure Compiler in its most aggressive mode for optimizing JavaScript.</p>
												  
												  <p>You have to annotate JavaScript pretty heavily to reap the full rewards of ADVANCED_OPTIMIZATIONS, a mode in Closure Compiler that is very aggressive at achieving the highest compression possible. Angular itself is already annotated and libraries built to spec with the Angular Package Format are compatible as well. Thats because developers already code Angular with TypeScript and the AOT compiler will convert our types to annotations Closure Compiler can interpret. If you maintain a type safe application you will get a highly optimized bundle with Closure Compiler!</p>
												  
												  <p>Now we can extend Angular CLI to build with Closure Compiler with the Architect API so it should make adoption much easier. Let's figure out how to bundle an application with Closure Compiler in the CLI!</p>
												  
												  <h2>
													<a name="how-to-build-angular-with-architect-cli" href="#how-to-build-angular-with-architect-cli" class="anchor">
													</a>
													How to build Angular with Architect CLI
												  </h2>
												  
												  <p>In next section, we look at the essential files needed to scaffold a Builder and the Architect targets necessary to bundle a simple Angular app with Closure Compiler. The concepts presented in this section could be extended for any Builder. At some point I wouldn't be surprised to see a schematic that makes scaffolding a Builder much easier, but for now we will create the files ourselves.</p>
												  
												  <h3>
													<a name="intro" href="#intro" class="anchor">
													</a>
													Intro
												  </h3>
												  
												  <p>First let's outline the steps we can take to build Angular.</p>
												  
												  <div class="table-wrapper-paragraph"><table>
												  <thead>
												  <tr>
												  <th>step</th>
												  <th>description</th>
												  <th>tool</th>
												  </tr>
												  </thead>
												  <tbody>
												  <tr>
												  <td>compile</td>
												  <td>compiles the app ahead of time</td>
												  <td>@angular/compiler</td>
												  </tr>
												  <tr>
												  <td>optimize</td>
												  <td>remove unnecessary byproducts of compilation w/ (optional)</td>
												  <td>@angular-devkit/build_optimizer</td>
												  </tr>
												  <tr>
												  <td>handle env</td>
												  <td>use the environments provided by cli (optional)</td>
												  <td>cp</td>
												  </tr>
												  <tr>
												  <td>bundle</td>
												  <td>bundle and mangle the AOT compiled code</td>
												  <td>google-closure-compiler</td>
												  </tr>
												  </tbody>
												  </table></div>
												  
												  <p>To build an Angular app for production we need to use the @angular/compiler-cli. If we were to do this manually we would evoke the compiler using the <code>ngc</code> command.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight plaintext"><code>ngc -p src/tsconfig.app.json
												  </code></pre></div>
												  
												  
												  
												  <p>This will output the AOT compiled application in the out-tsc directory, coincidentally where the cli puts it by default in a production build. That's because that is how the <code>outDir</code> is configured in src/tsconfig.app.json : <code>"outDir": "../out-tsc",</code></p>
												  
												  <p>We can optimize the application prior to bundling with @angular-devkit/build-optimizer. This package removes some code the compiler spit out that is not necessary, like the decorators we used in development.</p>
												  
												  <p>@angular/cli has this concept of environments where engineers can <code>import { environment } from './environment'</code>.  <code>environment</code> is an Object with configuration for each environment. To make a custom build friendly with @angular/cli we should support this API as well. Basically what needs to happen is the content of <code>environment.js</code> in the out-tsc directory needs to be swapped out with <code>environment.${env}.js</code> .</p>
												  
												  <p>To bundle with Closure Compiler we need a new configuration file: closure.conf. More on this later. Closure Compiler is a Java application distributed in google-closure-compiler-java package. Closure Compiler also provides a JavaScript API but in practice I've found the Java implementation to be more reliable.</p>
												  
												  <p><a href="https://i.giphy.com/media/l3q2K5jinAlChoCLS/giphy.gif" class="article-body-image-wrapper"><img src="https://i.giphy.com/media/l3q2K5jinAlChoCLS/giphy.gif" alt="" loading="lazy"></a></p>
												  
												  <p>To manually run the Closure Compiler application we can use arguments on the command line.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight plaintext"><code>java -jar ${jarPath} --flagFile ${confFile} --js_output_file ${outFile}
												  </code></pre></div>
												  
												  
												  
												  <p>That's it! In this tutorial we will take care of the mandatory steps 1 and 4, running the AOT compiler and optimizing a single bundle with Closure Compiler.</p>
												  
												  <p>In Build Angular like an Architect (Part 2) we add environments and optimize the bundle even more with @angular-devkit/build-optimizer. If you want a sneak peak at how this is done, <a href="https://github.com/steveblue/architect/blob/master/build_tools/src/util.ts">check out the Github repository</a>.</p>
												  
												  <h3>
													<a name="getting-started" href="#getting-started" class="anchor">
													</a>
													Getting Started
												  </h3>
												  
												  <p>Install the latest cli and architect packages globally using the <code>next</code>  version. The stable Architect CLI is only available in the latest releases.</p>
												  
												  <p>Architect development relies on node &gt; 10.14.1. Check which version of node you are running with <code>which node</code> and update node accordingly.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight shell"><code>npm i <span class="nt">-g</span> @angular/cli@next @angular-devkit/core@next @angular-devkit/architect@next @angular-devkit/architect-cli@next
												  </code></pre></div>
												  
												  
												  
												  <p>Create a new application workspace with @angular/cli.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight plaintext"><code>ng new build_repo
												  </code></pre></div>
												  
												  
												  
												  <p>We called the application build_repo.</p>
												  
												  <p>If you don't already have it installed, also download and install  <a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">latest Java SDK from Oracle</a>. Now you can run the Closure Compiler Java application.</p>
												  
												  <p>Install Closure Compiler and tsickle in the project workspace.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight plaintext"><code>npm i google-closure-compiler tsickle --save-dev
												  </code></pre></div>
												  
												  
												  
												  <h3>
													<a name="buildtools" href="#buildtools" class="anchor">
													</a>
													build_tools
												  </h3>
												  
												  <p>Make a new directory called ‘build_tools’ in the root of your project.</p>
												  
												  <p>Let's review the files we should have in the root directory.</p>
												  
												  <div class="table-wrapper-paragraph"><table>
												  <thead>
												  <tr>
												  <th>file</th>
												  <th>description</th>
												  </tr>
												  </thead>
												  <tbody>
												  <tr>
												  <td>build_tools</td>
												  <td>workspace for coding Builders</td>
												  </tr>
												  <tr>
												  <td>angular.json</td>
												  <td>Angular app workspace configuration</td>
												  </tr>
												  </tbody>
												  </table></div>
												  
												  <p>Create several new files in the build_tools directory. Below is a description of what each file does.</p>
												  
												  <div class="table-wrapper-paragraph"><table>
												  <thead>
												  <tr>
												  <th>file</th>
												  <th>description</th>
												  </tr>
												  </thead>
												  <tbody>
												  <tr>
												  <td>package.json</td>
												  <td>installs dependencies, provides context for Builder</td>
												  </tr>
												  <tr>
												  <td>tsconfig.json</td>
												  <td>typescript project configuration</td>
												  </tr>
												  <tr>
												  <td>builders.json</td>
												  <td>schema for the Builders available in this package</td>
												  </tr>
												  <tr>
												  <td>src/closure/schema.json</td>
												  <td>schema for a Closure Compiler Builder</td>
												  </tr>
												  <tr>
												  <td>src/closure/index.ts</td>
												  <td>root file for a Closure Compiler Builder</td>
												  </tr>
												  <tr>
												  <td>src/index.ts</td>
												  <td>root file for Builder package source</td>
												  </tr>
												  </tbody>
												  </table></div>
												  
												  <p>Make a package.json in the build_tools directory. The file should look like the below example.</p>
												  
												  <h3>
													<a name="packagejson" href="#packagejson" class="anchor">
													</a>
													package.json
												  </h3>
												  
												  
												  
												  <div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
													</span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"build_tools"</span><span class="p">,</span><span class="w">
													</span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
													</span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
													</span><span class="nl">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"src/index.js"</span><span class="p">,</span><span class="w">
													</span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
													  </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"echo </span><span class="se">\"</span><span class="s2">Error: no test specified</span><span class="se">\"</span><span class="s2"> &amp;&amp; exit 1"</span><span class="w">
													</span><span class="p">},</span><span class="w">
													</span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
													</span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MIT"</span><span class="p">,</span><span class="w">
													</span><span class="nl">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
													  </span><span class="nl">"@angular-devkit/architect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^0.800.0-beta.10"</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"@angular-devkit/core"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^8.0.0-beta.10"</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"@types/node"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^11.12.1"</span><span class="w">
													</span><span class="p">},</span><span class="w">
													</span><span class="nl">"builders"</span><span class="p">:</span><span class="w"> </span><span class="s2">"builders.json"</span><span class="w">
												  </span><span class="p">}</span><span class="w">
												  
												  </span></code></pre></div>
												  
												  
												  
												  <p>The package.json is necessary for @angular/cli to establish the location of builders.json and also to install the dependencies needed to develop the Builder.</p>
												  
												  <p>Run <code>npm install</code> in the build_tools directory.</p>
												  
												  <p>Make a new index.ts file in the src directory. Here export everything from src/closure/index.ts.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code><span class="k">export</span> <span class="o">*</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./closure</span><span class="dl">'</span><span class="p">;</span>
												  </code></pre></div>
												  
												  
												  
												  <p>In the build_tools directory make a new builder.json file.</p>
												  
												  <h3>
													<a name="buildersjson" href="#buildersjson" class="anchor">
													</a>
													builders.json
												  </h3>
												  
												  <p>This file introduces schema for the Builders available in this package.</p>
												  
												  <p>builders.json establishes the target Architect needs to point to each Builder. In this example the target is called 'closure' and it points to the Builder at './src/closure/index.js' and the Builder's schema is located at './src/closure/schema.json'.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
													</span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"@angular-devkit/architect/src/builders-schema.json"</span><span class="p">,</span><span class="w">
													</span><span class="nl">"builders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
													  </span><span class="nl">"closure"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
														</span><span class="nl">"implementation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./src/closure/index"</span><span class="p">,</span><span class="w">
														</span><span class="nl">"class"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./src/closure"</span><span class="p">,</span><span class="w">
														</span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./src/closure/schema.json"</span><span class="p">,</span><span class="w">
														</span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Build a Closure app."</span><span class="w">
													  </span><span class="p">}</span><span class="w">
													</span><span class="p">}</span><span class="w">
												  </span><span class="p">}</span><span class="w">
												  </span></code></pre></div>
												  
												  
												  
												  <h3>
													<a name="srcclosureschemajson" href="#srcclosureschemajson" class="anchor">
													</a>
													src/closure/schema.json
												  </h3>
												  
												  <p>While on the topic of schema, we might as well declare the schema for the Closure Compiler Builder. Builder schema establishes the outward facing API for the Builder.</p>
												  
												  <p>In ./src/closure/schema.json we define two required properties an engineer will need to provide in their workspace angular.json: <code>tsConfig</code> and <code>closureConfig</code>. These two properties map to the path of each configuration file: the tsconfig.json used to build Angular with the AOT compiler and the closure.conf used to bundle the application.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
													</span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/schema"</span><span class="p">,</span><span class="w">
													</span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Closure Compiler Builder."</span><span class="p">,</span><span class="w">
													</span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Closure Compiler Builder schema for Architect."</span><span class="p">,</span><span class="w">
													</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
													</span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
													  </span><span class="nl">"tsConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
														</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
														</span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The path to the Closure configuration file."</span><span class="w">
													  </span><span class="p">},</span><span class="w">
													  </span><span class="nl">"closureConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
														</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
														</span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The path to the Closure configuration file."</span><span class="w">
													  </span><span class="p">},</span><span class="w">
													</span><span class="p">},</span><span class="w">
													</span><span class="nl">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
													</span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
													  </span><span class="s2">"tsConfig"</span><span class="p">,</span><span class="w">
													  </span><span class="s2">"closureConfig"</span><span class="w">
													</span><span class="p">]</span><span class="w">
												  </span><span class="p">}</span><span class="w">
												  </span></code></pre></div>
												  
												  
												  
												  <h3>
													<a name="intro-to-builder-api" href="#intro-to-builder-api" class="anchor">
													</a>
													Intro to Builder API
												  </h3>
												  
												  <p>src/closure/index.ts is where the Builder logic is located.</p>
												  
												  <p>Builders are coded with TypeScript. The API that we need to use is mainly provided by @angular-devkit/architect and node. The awesome part of coding Builders is that the syntax is very familiar for anyone who codes an Angular application. Builders make heavy use of the Observable pattern from rxjs.</p>
												  
												  <p>First, lets setup our imports.</p>
												  
												  <p><code>BuilderContext</code> will get passed to every step of the build process.</p>
												  
												  <p><code>BuilderOutput</code> is what finally returns from the Observable at the end of the process.</p>
												  
												  <p><code>createBuilder</code> is a method we call to create an instance of a Builder. Builders have an API that enable logging, progress trakcing and schemduling of builds.</p>
												  
												  <p>We are going to make use of <code>Observable</code>, <code>of</code>, <code>catchError</code>, <code>mapTo</code>, and <code>concatMap</code> from rxjs.</p>
												  
												  <p><code>exec</code>, <code>normalize</code> and <code>readFileSync</code> are imported from standard node packages (child_process, path, and fs respectively). These tools will allow us to execute commands like we entered them on the command line ('exec'), enables cross platform handling of file paths with methods like <code>normalize</code>, and <code>readFileSync</code> gives us the ability to read a file syncronously.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight javascript"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">BuilderContext</span><span class="p">,</span> <span class="nx">BuilderOutput</span><span class="p">,</span> <span class="nx">createBuilder</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular-devkit/architect/src/index2</span><span class="dl">'</span><span class="p">;</span>
												  <span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">,</span> <span class="k">of</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs</span><span class="dl">'</span><span class="p">;</span>
												  <span class="k">import</span> <span class="p">{</span> <span class="nx">catchError</span><span class="p">,</span> <span class="nx">mapTo</span><span class="p">,</span> <span class="nx">concatMap</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs/operators</span><span class="dl">'</span><span class="p">;</span>
												  <span class="k">import</span> <span class="p">{</span> <span class="nx">exec</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">child_process</span><span class="dl">'</span><span class="p">;</span>
												  <span class="k">import</span> <span class="p">{</span> <span class="nx">normalize</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">;</span>
												  <span class="k">import</span> <span class="p">{</span> <span class="nx">readFileSync</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">;</span>
												  </code></pre></div>
												  
												  
												  
												  <p>Next make a new file called schema.interface.ts in build_tools/src/closure and declare an interface for TypeScript that mirrors the json-schema we created earlier. There are ways to use the json-schema in lieu of a TypeScript interface, but for simplicity lets just declare the schema as an interface.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code><span class="k">export</span> <span class="kr">interface</span> <span class="nx">ClosureBuilderSchema</span> <span class="p">{</span>
													<span class="nl">tsConfig</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
													<span class="nl">closureConfig</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
												  <span class="p">}</span>
												  </code></pre></div>
												  
												  
												  
												  <p>Import the new schema.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight javascript"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ClosureBuilderSchema</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./schema.interface</span><span class="dl">'</span><span class="p">;</span>
												  </code></pre></div>
												  
												  
												  
												  <p>Next declare an export for the Builder and also the callback function that executes the build.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight javascript"><code><span class="k">export</span> <span class="kd">function</span> <span class="nx">executeClosure</span><span class="p">(</span>
													<span class="nx">options</span><span class="p">:</span> <span class="nx">ClosureBuilderSchema</span><span class="p">,</span>
													<span class="nx">context</span><span class="p">:</span> <span class="nx">BuilderContext</span>
												  <span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">BuilderOutput</span><span class="o">&gt;</span> <span class="p">{</span>
													<span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">context</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
													  <span class="nx">mapTo</span><span class="p">({</span> <span class="na">success</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}),</span>
													  <span class="nx">catchError</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
														<span class="nx">context</span><span class="p">.</span><span class="nx">reportStatus</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">error</span><span class="p">);</span>
														<span class="k">return</span> <span class="p">[{</span> <span class="na">success</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}];</span>
													  <span class="p">}),</span>
													<span class="p">);</span>
												  <span class="p">}</span>
												  
												  <span class="k">export</span> <span class="k">default</span> <span class="nx">createBuilder</span><span class="o">&lt;</span><span class="nx">Record</span><span class="o">&lt;</span><span class="nx">string</span><span class="p">,</span> <span class="nx">string</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="nx">ClosureBuilderSchema</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">executeClosure</span><span class="p">);</span>
												  </code></pre></div>
												  
												  
												  
												  <p><code>executeClosure</code> takes two arguments: <code>options</code> and <code>context</code>.</p>
												  
												  <div class="table-wrapper-paragraph"><table>
												  <thead>
												  <tr>
												  <th>argument</th>
												  <th>description</th>
												  </tr>
												  </thead>
												  <tbody>
												  <tr>
												  <td>options</td>
												  <td>options passed in from angular.json</td>
												  </tr>
												  <tr>
												  <td>context</td>
												  <td>context of the current executing Builder</td>
												  </tr>
												  </tbody>
												  </table></div>
												  
												  <p><code>executeClosure</code> returns a rxjs <code>Observable</code>.</p>
												  
												  <p>If the build is successful <code>mapTo</code> passes <code>{success: true}</code> to display feedback in the terminal.</p>
												  
												  <p>If any step in the build process throws an error <code>catchError</code> will be called.</p>
												  
												  <h3>
													<a name="compiling-the-project-source" href="#compiling-the-project-source" class="anchor">
													</a>
													Compiling the project source
												  </h3>
												  
												  <p>In the build_tools directory add a tsconfig.json so we can compile the TypeScript we just coded.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
													</span><span class="nl">"compileOnSave"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
													</span><span class="nl">"buildOnSave"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
													</span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
													  </span><span class="nl">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"rootDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"."</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es2018"</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"module"</span><span class="p">:</span><span class="w"> </span><span class="s2">"commonjs"</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"moduleResolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"node"</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"noEmitOnError"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"noImplicitAny"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"removeComments"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"resolveJsonModule"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"esModuleInterop"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"skipLibCheck"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"strictNullChecks"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"declaration"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
													</span><span class="p">},</span><span class="w">
													</span><span class="nl">"lib"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
													  </span><span class="s2">"es2018"</span><span class="w">
													</span><span class="p">],</span><span class="w">
													</span><span class="nl">"typeRoots"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
													  </span><span class="s2">"./node_modules/@types"</span><span class="w">
													</span><span class="p">],</span><span class="w">
													</span><span class="nl">"types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
													  </span><span class="s2">"node"</span><span class="p">,</span><span class="w">
													  </span><span class="s2">"json-schema"</span><span class="w">
													</span><span class="p">],</span><span class="w">
													</span><span class="nl">"include"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
													  </span><span class="s2">"./src/**/*.ts"</span><span class="w">
													</span><span class="p">],</span><span class="w">
													</span><span class="nl">"exclude"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
													  </span><span class="s2">"./src/closure/schema.interface.ts"</span><span class="w">
													</span><span class="p">]</span><span class="w">
												  </span><span class="p">}</span><span class="w">
												  </span></code></pre></div>
												  
												  
												  
												  <p>In the build_tools directory use the <code>tsc</code> command to build the project.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight shell"><code>tsc <span class="nt">-p</span> tsconfig.json
												  </code></pre></div>
												  
												  
												  
												  <p>Alternatively, you could also run the watcher to build on every file change.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight plaintext"><code>tsc -p tsconfig.json --watch
												  </code></pre></div>
												  
												  
												  
												  <p>Now the project is built!</p>
												  
												  <p>For the sake of simplicity in this example the files are compiled in place, but we could fix this by setting the <code>outDir</code> parameter on the <code>compilerOptions</code>. We would need to also copy any schema.json and package.json over to a distribution folder as well.</p>
												  
												  <h3>
													<a name="configuring-angularjson" href="#configuring-angularjson" class="anchor">
													</a>
													Configuring angular.json
												  </h3>
												  
												  <p>Back in the workspace of the project we scaffolded, configure the angular.json. We need to tell the project where to point  ClosureBuilder we just created.</p>
												  
												  <p>Create a new property in the 'architect' configuration called 'closure_build'.</p>
												  
												  <p>Set the new 'closure_build' object 'builder' property to './build_tools:closure'.</p>
												  
												  <p>'./build_tools' because thats where the package.json for our Architect project is located and 'closure' because we want to run the Builder named 'closure'. We configured the builders.json found at './build_tools' in an earlier step. If the './build_tools' directory is published and we install the package via npm we could replace './build_tools' here with the package name.</p>
												  
												  <p>Create another property on the 'closure' object and name it 'options'. In this object, configure the path to the closure configuration (we have yet to make) and the tsconfig for the angular project.</p>
												  
												  <p>angular.json should look like this when you are done.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight json"><code><span class="nl">"architect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
													</span><span class="nl">"closure_build"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
													  </span><span class="nl">"builder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./build_tools:closure"</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
														</span><span class="nl">"closureConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"closure.conf"</span><span class="p">,</span><span class="w">
														</span><span class="nl">"tsConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"src/tsconfig.app.json"</span><span class="w">
													  </span><span class="p">}</span><span class="w">
													</span><span class="p">}</span><span class="w">
												  </span><span class="err">...</span><span class="w">
												  
												  </span></code></pre></div>
												  
												  
												  
												  <p>Using @angular-devkit/architect-cli package we installed globally earlier, test the Builder is working by passing the <code>architect</code> command the workspace name (build_repo) and the target we just established in angular.json (closure_build).<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight shell"><code>architect build_repo:closure_build
												  </code></pre></div>
												  
												  
												  
												  <p>Architect should print SUCCESS in the terminal. You should see something like this.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight shell"><code>SUCCESS
												  Result: <span class="o">{</span>
													  <span class="s2">"success"</span>: <span class="nb">true</span>,
													  <span class="s2">"target"</span>: <span class="o">{</span>
														  <span class="s2">"project"</span>: <span class="s2">"build_repo"</span>,
														  <span class="s2">"target"</span>: <span class="s2">"closure_build"</span>
													  <span class="o">}</span>
												  <span class="o">}</span>
												  </code></pre></div>
												  
												  
												  
												  <h3>
													<a name="what-is-going-on-here" href="#what-is-going-on-here" class="anchor">
													</a>
													What is going on here?
												  </h3>
												  
												  <p>The Architect CLI allows us to test the Builder works correctly in a workspace. The <code>architect</code> command is equivalent to <code>ng run</code> in any typical @angular/cli workspace. The reason we see SUCCESS is because all the builder is doing is mapping an Observable we created to the success message in ./build_tools/src/closure/index.ts.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code><span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">context</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
													<span class="nx">mapTo</span><span class="p">({</span> <span class="na">success</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}),</span>
													<span class="nx">catchError</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
													  <span class="nx">context</span><span class="p">.</span><span class="nx">reportStatus</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">error</span><span class="p">);</span>
													  <span class="k">return</span> <span class="p">[{</span> <span class="na">success</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}];</span>
													<span class="p">}),</span>
												  <span class="p">);</span>
												  </code></pre></div>
												  
												  
												  
												  <p>We still need to code our build, but at least we know the scaffolding works!</p>
												  
												  <p>To continue testing the build run, in <code>build_tools</code> directory run <code>tsc -p tsconfig.json --watch</code>.<br>
												  In the root of the project, run <code>architect build_repo:closure_build</code> after each incremental build of typescript.</p>
												  <h2>
													<a name="coding-builders-with-rxjs-observables-and-nodejs" href="#coding-builders-with-rxjs-observables-and-nodejs" class="anchor">
													</a>
													Coding Builders with RxJS Observables and Node.js
												  </h2>
												  
												  <p>Previously we established the ClosureBuilder will execute the build with the <code>executeClosure</code> method that returns an RxJS Observable. There is a problem we should consider with this approach. Observables are asynchronous, however builds often have a set of instructions that have to run synchronously. There are certainly use cases for asynchronously performing build tasks where Observables come in handy. We explore asynchronous use cases in later posts. For now we just need to execute a set of steps. To perform synchronous tasks with RxJS we employ the <code>concatMap</code> operator like in this example:<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code>  <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">context</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
													  <span class="nx">concatMap</span><span class="p">(</span> <span class="nx">results</span> <span class="o">=&gt;</span> <span class="nx">ngc</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">context</span><span class="p">)),</span>
													  <span class="nx">concatMap</span><span class="p">(</span> <span class="nx">results</span> <span class="o">=&gt;</span> <span class="nx">compileMain</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">context</span><span class="p">)),</span>
													  <span class="nx">concatMap</span><span class="p">(</span> <span class="nx">results</span> <span class="o">=&gt;</span> <span class="nx">closure</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">),</span>
													  <span class="nx">mapTo</span><span class="p">({</span> <span class="na">success</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}),</span>
													  <span class="nx">catchError</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
														<span class="nx">context</span><span class="p">.</span><span class="nx">reportStatus</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">error</span><span class="p">);</span>
														<span class="k">return</span> <span class="p">[{</span> <span class="na">success</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}];</span>
													  <span class="p">}),</span>
													<span class="p">);</span>
												  </code></pre></div>
												  
												  
												  
												  <p>In the above example the AOT compiler will execute, followed by a step for formatting the <code>main.js</code>, and finally a step that executes Closure Compiler to bundle and optimize the app.</p>
												  
												  <p>The @angular/cli team apparently has the opinion that coding a Builder should seem familiar to anyone who codes an Angular application. Fans of isomorphism are swooning for the API!</p>
												  
												  <p>We have a problem though because of this opinion, however it is an easy problem to solve.</p>
												  
												  <p>Problem:</p>
												  
												  <p>Node.js ❤️ Promises.</p>
												  
												  <p>Builders ❤️ RxJS Observables.</p>
												  
												  <p>Solution 1:</p>
												  
												  <p>RxJS Observables are interoperable with Promises.</p>
												  
												  <p><code>of(new Promise())</code> is a thing. RxJs will convert Promises to Observables behind the scenes for us.</p>
												  
												  <p>Solution 2:</p>
												  
												  <p>We can convert Promise based workflows to Observables.</p>
												  
												  <p>Consider this example we will use to evoke the AOT compiler with the Node.js <code>exec</code> method. The <code>ngc</code> method returns an <code>Observable</code>.</p>
												  
												  <p>In the <code>Observable</code> callback, we pass the observer. The program runs exec, performing the <code>ngc -p tsconfig.app.json</code> command as if we entered it in the terminal.</p>
												  
												  <p>If AOT compilation results in an Error, we call <code>observer.error()</code>.</p>
												  
												  <p>If AOT compilation succeeds, we call <code>observer.next()</code>.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code><span class="k">export</span> <span class="kd">function</span> <span class="nx">ngc</span><span class="p">(</span>
													<span class="nx">options</span><span class="p">:</span> <span class="nx">AbstractBuilderSchema</span> <span class="o">|</span> <span class="nx">RollupBuilderSchema</span> <span class="o">|</span> <span class="nx">ClosureBuilderSchema</span><span class="p">,</span>
													<span class="nx">context</span><span class="p">:</span> <span class="nx">BuilderContext</span>
												  <span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="p">{}</span><span class="o">&gt;</span> <span class="p">{</span>
												  
													  <span class="k">return</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">((</span><span class="nx">observer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
												  
														  <span class="nx">exec</span><span class="p">(</span><span class="nx">normalize</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">workspaceRoot</span> <span class="o">+</span><span class="dl">'</span><span class="s1">/node_modules/.bin/ngc</span><span class="dl">'</span><span class="p">)</span> <span class="o">+</span>
															   <span class="dl">'</span><span class="s1"> -p </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">options</span><span class="p">.</span><span class="nx">tsConfig</span><span class="p">,</span>
															   <span class="p">{},</span>
															   <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">stdout</span><span class="p">,</span> <span class="nx">stderr</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
																<span class="k">if</span> <span class="p">(</span><span class="nx">stderr</span><span class="p">)</span> <span class="p">{</span>
																	<span class="nx">observer</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">stderr</span><span class="p">);</span>
																<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
																	<span class="nx">observer</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">stdout</span><span class="p">);</span>
																<span class="p">}</span>
														  <span class="p">});</span>
												  
													  <span class="p">});</span>
												  
												  <span class="p">}</span>
												  </code></pre></div>
												  
												  
												  
												  <p>When the above method gets inserted into the Observable map operator in <code>executeClosure</code>, the step will run!<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code>  <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">context</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
													  <span class="nx">concatMap</span><span class="p">(</span> <span class="nx">results</span> <span class="o">=&gt;</span> <span class="nx">ngc</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">context</span><span class="p">)),</span>
												  </code></pre></div>
												  
												  
												  
												  <p>Let's look at a few examples of build steps we execute to build an application with Closure Compiler.</p>
												  
												  <p>We outlined the build steps earlier at a conceptual level, but let's look at them again in more detail.</p>
												  
												  <h3>
													<a name="angular-compiler" href="#angular-compiler" class="anchor">
													</a>
													Angular Compiler
												  </h3>
												  
												  <p>Angular is built ahead of time with the AOT compiler for production. AOT compilation results in smaller bundles, is more secure than JIT, and most important for our example, works with Closure Compiler! The AOT compiler translates TypeScript type annotations using a tool called tsickle.</p>
												  
												  <p>To configure the AOT compiler to output the annotations Closure Compiler needs to optimize in ADVANCED_OPTIMIZATIONS mode, we add two configuration options in the Angular workspace tsconfig.app.json.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight json"><code><span class="nl">"angularCompilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
													  </span><span class="nl">"annotationsAs"</span><span class="p">:</span><span class="w"> </span><span class="s2">"static fields"</span><span class="p">,</span><span class="w">
													  </span><span class="nl">"annotateForClosureCompiler"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
												  </span><span class="p">}</span><span class="w">
												  </span></code></pre></div>
												  
												  
												  
												  <p>Back in build_tools/src/closure/index.ts, import <code>exec</code> so we can execute the AOT compiler and <code>normalize</code> so any paths we use are cross platform compatible, meaning users running the build on Windows can also use our script.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight javascript"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">exec</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">child_process</span><span class="dl">'</span><span class="p">;</span>
												  <span class="k">import</span> <span class="p">{</span> <span class="nx">normalize</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">;</span>
												  </code></pre></div>
												  
												  
												  
												  <p>Make a new function called ngc and give it two arguments: <code>options</code> and <code>context</code>. Every build step will take these two arguments in our example. <code>options</code> is the options the user passed in through angular.json, while <code>context</code> provides methods on the current <code>BuilderContext</code> we can use. We detail some of these methods in Part 2.</p>
												  
												  <p>For now we return an <code>Observable</code> that calls <code>exec</code>, passes in an absolute path to <code>ngc</code> in our workspace and then uses the <code>-p</code> argument to pass in a TypeScript configuration.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code>
												  <span class="k">export</span> <span class="kd">function</span> <span class="nx">ngc</span><span class="p">(</span>
													<span class="nx">options</span><span class="p">:</span> <span class="nx">AbstractBuilderSchema</span> <span class="o">|</span> <span class="nx">RollupBuilderSchema</span> <span class="o">|</span> <span class="nx">ClosureBuilderSchema</span><span class="p">,</span>
													<span class="nx">context</span><span class="p">:</span> <span class="nx">BuilderContext</span>
												  <span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="p">{}</span><span class="o">&gt;</span> <span class="p">{</span>
												  
													<span class="k">return</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">((</span><span class="nx">observer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
												  
													  <span class="nx">exec</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">normalize</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">workspaceRoot</span> <span class="o">+</span><span class="dl">'</span><span class="s1">/node_modules/.bin/ngc</span><span class="dl">'</span><span class="p">)}</span><span class="s2"> -p </span><span class="p">${</span><span class="nx">options</span><span class="p">.</span><span class="nx">tsConfig</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
															<span class="p">{},</span>
															<span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">stdout</span><span class="p">,</span> <span class="nx">stderr</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
															<span class="k">if</span> <span class="p">(</span><span class="nx">stderr</span><span class="p">)</span> <span class="p">{</span>
																<span class="nx">observer</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">stderr</span><span class="p">);</span>
															<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
																<span class="nx">observer</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">stdout</span><span class="p">);</span>
															<span class="p">}</span>
													  <span class="p">});</span>
												  
													<span class="p">});</span>
												  
												  <span class="p">}</span>
												  </code></pre></div>
												  
												  
												  
												  <p>If we add this operation to the <code>executeClosure</code> function.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code>  <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">context</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
													  <span class="nx">concatMap</span><span class="p">(</span> <span class="nx">results</span> <span class="o">=&gt;</span> <span class="nx">ngc</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">context</span><span class="p">)),</span>
												  </code></pre></div>
												  
												  
												  
												  <p>Build the project.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight shell"><code>tsc <span class="nt">-p</span> tsconfig.json
												  </code></pre></div>
												  
												  
												  
												  <p>In the Angular workspace we should be able to see a new directory called <code>out-tsc</code>  after we run the Architect CLI.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight shell"><code>architect build_repo:closure_build
												  </code></pre></div>
												  
												  
												  
												  <p>This directory will be filled with AOT compiled code that has the file extension <code>ngfactory.js</code>. All of our application logic has been compiled into these files.</p>
												  
												  <p>If we look closely at the ahead of time compiled code, we will see a problem with the entry point of the Angular application in out-tsc/src/main.js.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code><span class="nx">platformBrowserDynamic</span><span class="p">().</span><span class="nx">bootstrapModule</span><span class="p">(</span><span class="nx">AppModule</span><span class="p">)</span>
												  </code></pre></div>
												  
												  
												  
												  <p>The entry point is still referencing the <code>AppModule</code> found in out-tsc/src/app/app.module.js. We need our app to bootstrap with the ahead of time compiled  <code>AppModuleNgFactory</code> found in out-tsc/src/app/app.module.ngfactory.js instead.</p>
												  
												  <p>@angular/cli takes care of this for us automatically when we run <code>ng serve</code> or <code>ng build</code>, Since we are coding a custom build, we need to transform the main.js ourselves.</p>
												  
												  <h3>
													<a name="format-mainjs" href="#format-mainjs" class="anchor">
													</a>
													Format main.js
												  </h3>
												  
												  <p>We need a way to read the source <code>main.ts</code> from disk, find and replace portions of the file content, compile the TypeScript and then write the transformed file to disk.</p>
												  
												  <p>Luckily typescript is already a dependency of the project. We can just import it into build_tools/src/closure/index.ts.</p>
												  
												  <p>For all of the file management tasks we have some handy Node.js functions (<code>readFileSync</code>, <code>writeFile</code>, and <code>readFile</code>) found in fs.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight javascript"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">ts</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">typescript</span><span class="dl">'</span><span class="p">;</span>
												  <span class="k">import</span> <span class="p">{</span> <span class="nx">readFileSync</span><span class="p">,</span> <span class="nx">writeFile</span><span class="p">,</span> <span class="nx">readFile</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">;</span>
												  </code></pre></div>
												  
												  
												  
												  <p>This operation is a little bit more complex than the last example, but the format is the same. In the <code>compileMain</code> function we return an Observable again. The source main.ts is read from disk, the contents of the file are replaced, the content is then transpiled with the compilerOptions from the tsconfig we configured, and finally the file is written to disk in the out-tsc directory, replacing the file the AOT compiler originally output.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code><span class="k">export</span> <span class="kd">function</span> <span class="nx">compileMain</span><span class="p">(</span>
													<span class="nx">options</span><span class="p">:</span> <span class="nx">AbstractBuilderSchema</span> <span class="o">|</span> <span class="nx">RollupBuilderSchema</span> <span class="o">|</span> <span class="nx">ClosureBuilderSchema</span><span class="p">,</span>
													<span class="nx">context</span><span class="p">:</span> <span class="nx">BuilderContext</span>
												  <span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="p">{}</span><span class="o">&gt;</span> <span class="p">{</span>
												  
													<span class="k">return</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">((</span><span class="nx">observer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
												  
														<span class="kd">const</span> <span class="nx">inFile</span> <span class="o">=</span> <span class="nx">normalize</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">workspaceRoot</span><span class="o">+</span><span class="dl">'</span><span class="s1">/src/main.ts</span><span class="dl">'</span><span class="p">);</span>
														<span class="kd">const</span> <span class="nx">outFile</span> <span class="o">=</span> <span class="nx">normalize</span><span class="p">(</span><span class="dl">'</span><span class="s1">out-tsc/src/main.js</span><span class="dl">'</span><span class="p">);</span>
														<span class="kd">const</span> <span class="nx">tsConfig</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">join</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">workspaceRoot</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">tsConfig</span><span class="p">),</span> <span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
												  
														<span class="nx">readFile</span><span class="p">(</span><span class="nx">inFile</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">contents</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
												  
															<span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">observer</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
												  
															<span class="nx">contents</span> <span class="o">=</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/platformBrowserDynamic/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">platformBrowser</span><span class="dl">'</span><span class="p">);</span>
															<span class="nx">contents</span> <span class="o">=</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/platform-browser-dynamic/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">platform-browser</span><span class="dl">'</span><span class="p">);</span>
															<span class="nx">contents</span> <span class="o">=</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/bootstrapModule/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">bootstrapModuleFactory</span><span class="dl">'</span><span class="p">);</span>
															<span class="nx">contents</span> <span class="o">=</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/AppModule/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">AppModuleNgFactory</span><span class="dl">'</span><span class="p">);</span>
															<span class="nx">contents</span> <span class="o">=</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/.module/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">.module.ngfactory</span><span class="dl">'</span><span class="p">);</span>
												  
															<span class="kd">const</span> <span class="nx">outputContent</span> <span class="o">=</span> <span class="nx">ts</span><span class="p">.</span><span class="nx">transpileModule</span><span class="p">(</span><span class="nx">contents</span><span class="p">,</span> <span class="p">{</span>
															  <span class="na">compilerOptions</span><span class="p">:</span> <span class="nx">tsConfig</span><span class="p">.</span><span class="nx">compilerOptions</span><span class="p">,</span>
															  <span class="na">moduleName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app</span><span class="dl">'</span>
															<span class="p">})</span>
												  
															<span class="nx">writeFile</span><span class="p">(</span><span class="nx">outFile</span><span class="p">,</span> <span class="nx">outputContent</span><span class="p">.</span><span class="nx">outputText</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
																<span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">observer</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
																<span class="nx">observer</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">outputContent</span><span class="p">.</span><span class="nx">outputText</span><span class="p">);</span>
															<span class="p">});</span>
												  
														<span class="p">});</span>
												  
													<span class="p">});</span>
												  <span class="p">}</span>
												  </code></pre></div>
												  
												  
												  
												  <p>Add the <code>compileMain</code> method to the pipe.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code><span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">context</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
													<span class="nx">concatMap</span><span class="p">(</span> <span class="nx">results</span> <span class="o">=&gt;</span> <span class="nx">ngc</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">),</span>
													<span class="nx">concatMap</span><span class="p">(</span> <span class="nx">results</span> <span class="o">=&gt;</span> <span class="nx">compileMain</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">),</span>
												  <span class="p">}</span>
												  </code></pre></div>
												  
												  
												  
												  <p>Build the project.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight shell"><code>tsc <span class="nt">-p</span> tsconfig.json
												  </code></pre></div>
												  
												  
												  
												  <p>Run the Architect CLI.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight shell"><code>architect build_repo:closure_build
												  </code></pre></div>
												  
												  
												  
												  <p>The file at out-tsc/src/main.js should call a <code>bootstrapModuleFactory</code> method on <code>platformBrowser</code> and pass in the <code>AppModuleNgFactory</code>.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight javascript"><code><span class="nx">platformBrowser</span><span class="p">().</span><span class="nx">bootstrapModuleFactory</span><span class="p">(</span><span class="nx">AppModuleNgFactory</span><span class="p">)</span>
												  </code></pre></div>
												  
												  
												  
												  <p>Now the entry point for our bundle is properly formatted for AOT compilation we can run Closure Compiler.</p>
												  
												  <h3>
													<a name="closure-compiler" href="#closure-compiler" class="anchor">
													</a>
													Closure Compiler
												  </h3>
												  
												  <p>In order to build with Closure Compiler, we first need to write a configuration file called closure.conf in the root of the Angular workspace.</p>
												  
												  <h3>
													<a name="closureconf" href="#closureconf" class="anchor">
													</a>
													closure.conf
												  </h3>
												  
												  <p>The closure.conf file configures Closure Compiler in the following ways:</p>
												  
												  <ul>
												  <li>sets optional parameters for the build (--compilation_level, --create_source_map, etc)</li>
												  <li>declares dependencies and external files (--js and --externs)</li>
												  <li>location of the source files (AOT compiled app in the /out-tsc directory)</li>
												  <li>entry point for the bundle (--entry_point)</li>
												  <li>options for resolving node packages (--module_resolution, --package_json_entry_names)</li>
												  </ul>
												  
												  <p>This particular closure.conf works with angular packages ~8.0.0-beta.10.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight shell"><code><span class="nt">--compilation_level</span><span class="o">=</span>ADVANCED_OPTIMIZATIONS
												  <span class="nt">--language_out</span><span class="o">=</span>ECMASCRIPT5
												  <span class="nt">--variable_renaming_report</span><span class="o">=</span>closure/variable_renaming_report
												  <span class="nt">--property_renaming_report</span><span class="o">=</span>closure/property_renaming_report
												  <span class="nt">--create_source_map</span><span class="o">=</span>%outname%.map
												  
												  <span class="nt">--warning_level</span><span class="o">=</span>QUIET
												  <span class="nt">--dependency_mode</span><span class="o">=</span>STRICT
												  <span class="nt">--rewrite_polyfills</span><span class="o">=</span><span class="nb">false</span>
												  <span class="nt">--jscomp_off</span><span class="o">=</span>checkVars
												  
												  <span class="nt">--externs</span> node_modules/zone.js/dist/zone_externs.js
												  
												  <span class="nt">--js</span> node_modules/tslib/package.json
												  <span class="nt">--js</span> node_modules/tslib/tslib.es6.js
												  
												  <span class="nt">--js</span> node_modules/rxjs/package.json
												  <span class="nt">--js</span> node_modules/rxjs/_esm2015/index.js
												  <span class="nt">--js</span> node_modules/rxjs/_esm2015/internal/<span class="k">**</span>.js
												  <span class="nt">--js</span> node_modules/rxjs/operators/package.json
												  <span class="nt">--js</span> node_modules/rxjs/_esm2015/operators/index.js
												  
												  <span class="nt">--js</span> node_modules/@angular/core/package.json
												  <span class="nt">--js</span> node_modules/@angular/core/fesm2015/core.js
												  
												  <span class="nt">--js</span> node_modules/@angular/common/package.json
												  <span class="nt">--js</span> node_modules/@angular/common/fesm2015/common.js
												  
												  <span class="nt">--js</span> node_modules/@angular/platform-browser/package.json
												  <span class="nt">--js</span> node_modules/@angular/platform-browser/fesm2015/platform-browser.js
												  
												  <span class="nt">--js</span> node_modules/@angular/forms/package.json
												  <span class="nt">--js</span> node_modules/@angular/forms/fesm2015/forms.js
												  
												  <span class="nt">--js</span> node_modules/@angular/common/http/package.json
												  <span class="nt">--js</span> node_modules/@angular/common/fesm2015/http.js
												  
												  <span class="nt">--js</span> node_modules/@angular/router/package.json
												  <span class="nt">--js</span> node_modules/@angular/router/fesm2015/router.js
												  
												  <span class="nt">--js</span> node_modules/@angular/animations/package.json
												  <span class="nt">--js</span> node_modules/@angular/animations/fesm2015/animations.js
												  
												  <span class="nt">--js</span> node_modules/@angular/animations/browser/package.json
												  <span class="nt">--js</span> node_modules/@angular/animations/fesm2015/browser.js
												  
												  <span class="nt">--js</span> node_modules/@angular/platform-browser/animations/package.json
												  <span class="nt">--js</span> node_modules/@angular/platform-browser/fesm2015/animations.js
												  
												  <span class="nt">--js</span> out-tsc/<span class="k">**</span>.js
												  
												  <span class="nt">--module_resolution</span><span class="o">=</span>node
												  <span class="nt">--package_json_entry_names</span> jsnext:main,es2015
												  <span class="nt">--process_common_js_modules</span>
												  
												  <span class="nt">--entry_point</span><span class="o">=</span>./out-tsc/src/main.js
												  </code></pre></div>
												  
												  
												  
												  <p>With the closure.conf in place, we can write a function in build_tools/src/closure/index.ts that executes the Java application in the google-closure-compiler-java package we installed earlier.</p>
												  
												  <p>In this example, we begin working with the <code>BuilderContext</code>. We reference the current <code>target</code> and <code>project</code> to configure where the final bundle is output based on the configuration in angular.json.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code><span class="k">export</span> <span class="kd">function</span> <span class="nx">closure</span><span class="p">(</span>
													 <span class="nx">options</span><span class="p">:</span> <span class="nx">ClosureBuilderSchema</span><span class="p">,</span>
													 <span class="nx">context</span><span class="p">:</span> <span class="nx">BuilderContext</span>
												  <span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="p">{}</span><span class="o">&gt;</span> <span class="p">{</span>
												  
													<span class="k">return</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">((</span><span class="nx">observer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
												  
													  <span class="kd">const</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">target</span> <span class="p">?</span> <span class="nx">context</span><span class="p">.</span><span class="nx">target</span> <span class="p">:</span> <span class="p">{</span> <span class="na">project</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app</span><span class="dl">'</span> <span class="p">};</span>
													  <span class="kd">const</span> <span class="nx">jarPath</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">jarPath</span> <span class="p">?</span> <span class="nx">options</span><span class="p">.</span><span class="nx">jarPath</span> <span class="p">:</span> <span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="s1">node_modules</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">google-closure-compiler-java</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">compiler.jar</span><span class="dl">'</span><span class="p">);</span>
													  <span class="kd">const</span> <span class="nx">confPath</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">closureConfig</span><span class="p">;</span>
													  <span class="kd">const</span> <span class="nx">outFile</span> <span class="o">=</span> <span class="s2">`./dist/</span><span class="p">${</span><span class="nx">target</span><span class="p">.</span><span class="nx">project</span><span class="p">}</span><span class="s2">/main.js`</span><span class="p">;</span>
												  
													  <span class="nx">exec</span><span class="p">(</span><span class="s2">`java -jar </span><span class="p">${</span><span class="nx">jarPath</span><span class="p">}</span><span class="s2"> --flagfile </span><span class="p">${</span><span class="nx">confPath</span><span class="p">}</span><span class="s2"> --js_output_file </span><span class="p">${</span><span class="nx">outFile</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
														  <span class="p">{},</span>
														  <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">stdout</span><span class="p">,</span> <span class="nx">stderr</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
															<span class="k">if</span> <span class="p">(</span><span class="nx">stderr</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">ERROR</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span>
															  <span class="nx">observer</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
															<span class="p">}</span>
															<span class="nx">observer</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">stdout</span><span class="p">);</span>
														  <span class="p">});</span>
													  <span class="p">})</span>
												  <span class="p">}</span>
												  </code></pre></div>
												  
												  
												  
												  <p>Add the new <code>closure</code> function to the pipe in <code>executeClosure</code>.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight typescript"><code>
												  <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">context</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
													<span class="nx">concatMap</span><span class="p">(</span> <span class="nx">results</span> <span class="o">=&gt;</span> <span class="nx">ngc</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">),</span>
													<span class="nx">concatMap</span><span class="p">(</span> <span class="nx">results</span> <span class="o">=&gt;</span> <span class="nx">compileMain</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">),</span>
													<span class="nx">concatMap</span><span class="p">(</span> <span class="nx">results</span> <span class="o">=&gt;</span> <span class="nx">closure</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">)</span>
												  <span class="p">}</span>
												  </code></pre></div>
												  
												  
												  
												  <p>Build the project.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight shell"><code>tsc <span class="nt">-p</span> tsconfig.json
												  </code></pre></div>
												  
												  
												  
												  <p>Run the Architect CLI.<br>
												  </p>
												  
												  <div class="highlight"><pre class="highlight shell"><code>architect build_repo:closure_build
												  </code></pre></div>
												  
												  
												  
												  <h1>
													<a name="great-scott" href="#great-scott" class="anchor">
													</a>
													GREAT SCOTT!
												  </h1>
												  
												  <p><a href="https://i.giphy.com/media/3o7aCRBQC8u5GaW092/giphy.gif" class="article-body-image-wrapper"><img src="https://i.giphy.com/media/3o7aCRBQC8u5GaW092/giphy.gif" alt="" loading="lazy"></a></p>
												  
												  <h2>
													<a name="angularcli-is-optimizing-a-bundle-with-closure-compiler" href="#angularcli-is-optimizing-a-bundle-with-closure-compiler" class="anchor">
													</a>
													@angular/cli is optimizing a bundle with Closure Compiler!
												  </h2>
												  
												  <p>Let's analyze the bundle that was created in a battle for the ages.</p>
												  
												  <h3>
													<a name="webpack-vs-closure-compiler" href="#webpack-vs-closure-compiler" class="anchor">
													</a>
													Webpack vs. Closure Compiler
												  </h3>
												  
												  <p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--4LJZGvBt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/oc2vdqxqoxv76c0dhbxo.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--4LJZGvBt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/oc2vdqxqoxv76c0dhbxo.png" alt="" loading="lazy"></a></p>
												  
												  <p>Webpack and Terser bundled and optimized the app ~43.3Kb(gzipped).</p>
												  
												  <p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--oV3rbSXt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/r00tdlcrbumb4lfvzcmo.png" class="article-body-image-wrapper"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--oV3rbSXt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/r00tdlcrbumb4lfvzcmo.png" alt="" loading="lazy"></a></p>
												  
												  <p>Closure Compiler bundled and optimized the app ~37.3Kb (gzipped).</p>
												  
												  <h1>
													<a name="14-reduction-in-bundle-size" href="#14-reduction-in-bundle-size" class="anchor">
													</a>
													~14% reduction in bundle size
												  </h1>
												  
												  <p>Thats a ~14% smaller bundle for this simple app! At scale that 14% can make a real tangible difference. These estimates include optimizations with @angular-devkit/build-optimizer and are served with gzip compression. I’ve seen other apps where Closure Compiler made the bundle ~20% smaller than the same app mangled with Uglify.</p>
												  
												  <p>There are other advantages to using Closure Compiler instead of Webpack. Closure provides warnings about potentially dangerous vulnerabilities. This helps keep web applications secure. Closure Compiler also optimizes JavaScript in interesting ways, transforming the actual code to make it run more performantly in the browser.</p>
												  
												  <h2>
													<a name="conclusion" href="#conclusion" class="anchor">
													</a>
													Conclusion
												  </h2>
												  
												  <p>In Build Angular like an Architect (Part 1) we looked at how to code a Builder and execute the build with the Architect CLI. We extended @angular/cli to optimize a production bundle with Closure Compiler.</p>
												  
												  <p>The source code for <a href="https://github.com/steveblue/architect">Build Angular Like An Architect is available on Github</a>.</p>
												  
												  <p>In my humble opinion, @angular-devkit/architect is the single largest improvement to the Angular CLI since schematics were released. Angular CLI is becoming so extensible it may even be able to build any JavaScript project not just Angular. We can now extend the cli to perform any task we can imagine! That is an amazing feat for the Angular CLI team!</p>
												  
												  <p><a href="https://i.giphy.com/media/1ylQyCK1qZ63vn0lS0/giphy.gif" class="article-body-image-wrapper"><img src="https://i.giphy.com/media/1ylQyCK1qZ63vn0lS0/giphy.gif" alt="" loading="lazy"></a></p>
												  
												  <p>In <a href="https://dev.to/steveblue/build-angular-like-an-architect-part-2-208l">Build Angular like an Architect (Part 2)</a> we look at angular-devkit/build-optimizer, figure out how to implement environments.</p>
												  
												  <h2>
													<a name="what-do-you-think" href="#what-do-you-think" class="anchor">
													</a>
													What do you think?
												  </h2>
												  
												  <p>What is your opinion of the new Architect CLI?</p>
												  
												  <p>What do you think about the @angular/cli becoming extensible?</p>
												  
												  
												</div></div>
										</div>
									</div>
								</div>
							</li>
						</ul>
						<a class="prev_button" href="#"><span></span></a>
						<a class="next_button" href="#"><span></span></a>
					</div>
				</div>
			</div>
		</div>
		<!-- /NEWS -->
		
		<!-- CONTACT -->
		<div class="edina_tm_contact" id="contact">
			<div class="container">
				<div class="edina_tm_title">
					<h3>Contact</h3>
				</div>
				<div class="extra_info">
					<ul class="wrapper">
						<li class="wow fadeInLeft" data-wow-duration="1s" data-wow-delay="0.2s">
							<div class="list_inner">
								<h3>Email:</h3>
								<ul class="in">
									<li><a href="mailto://stefan.martic.sm@gmail.com">stefan.martic.sm@gmail.com</span></a></li>
								</ul>
							</div>
						</li>
						<li class="wow fadeInLeft" data-wow-duration="1s" data-wow-delay="0.4s">
							<div class="list_inner">
								<h3>Address:</h3>
								<ul class="in">
									<li>
										<p>Novi Kneževac, Vojvodina, Serbia</p>
									</li>
								</ul>
							</div>
						</li>
						<li class="wow fadeInLeft" data-wow-duration="1s" data-wow-delay="0.4s">
							<div class="list_inner">
								<h3>LinkedIn:</h3>
								<ul class="in">
									<li>
										<a href="https://linkedin.com/in/stefan-martic">linkedin.com/in/stefan-martic</a>
									</li>
								</ul>
							</div>
						</li>
					</ul>
				</div>
				<div class="mainpart">
					<div class="left">
						<div class="title">
							<p>I'm always open to discussing product<br /><span>design work or partnerships.</span></p>
						</div>
						<div class="fields wow fadeInLeft" data-wow-duration="1s">
							<form action="https://marketifythemes.net/" method="post" class="contact_form" id="contact_form" autocomplete="off">
								<div class="returnmessage" data-success="Your message has been received, We will contact you soon."></div>
								<div class="empty_notice"><span>Please Fill Required Fields</span></div>
								<div class="first_row">
									<input id="name" type="text" placeholder="Name*" />
								</div>
								<div class="second">
									<input id="email" type="text" placeholder="Email*" />
								</div>
								<div class="third">
									<textarea id="message" placeholder="Message*"></textarea>
								</div>
								<div class="edina_tm_button">
									<a id="send_message" href="#">Submit</a>
								</div>

								<!-- If you want change mail address to yours, just open "modal" folder >> contact.php and go to line 4 and change detail to yours.  -->

							</form>
						</div>
					</div>
					
				</div>
			</div>
		</div>
		<!-- /CONTACT -->
		
		
	</div>
	<!-- /MAINPART -->
</div>
<!-- / WRAPPER ALL -->
<!-- SCRIPTS -->
<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="js/jquery.js"></script>
<!--[if lt IE 10]> <script type="text/javascript" src="js/ie8.js"></script> <![endif]-->	
<script src="js/plugins.js"></script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA5bpEs3xlB8vhxNFErwoo3MXR64uavf6Y&amp;callback=initMap"></script>
<script src="js/init.js"></script>
<!-- /SCRIPTS -->

</body>

<!-- Mirrored from marketifythemes.net/html/STEFAN MARTIC/index-dark.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 03 Dec 2021 15:34:56 GMT -->
</html>